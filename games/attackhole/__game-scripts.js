"use strict";(()=>{var t=Object.defineProperty,__name=(e,i)=>t(e,"name",{value:i,configurable:!0});pc.AppBase.prototype.getTimeMs=function(){return this._time},pc.AppBase.prototype.getTimeSec=function(){return.001*this._time},pc.extend(pc,function(){var t=__name((function(t){this._app=t,this._tweens=[],this._add=[]}),"TweenManager");t.prototype={add:function(t){return this._add.push(t),t},update:function(t){for(var e=0,i=this._tweens.length;e<i;)this._tweens[e].update(t)?e++:(this._tweens.splice(e,1),i--);if(this._add.length){for(let t=0;t<this._add.length;t++)this._tweens.indexOf(this._add[t])>-1||this._tweens.push(this._add[t]);this._add.length=0}}};var e=__name((function(t,e,i){pc.events.attach(this),this.manager=e,i&&(this.entity=null),this.time=0,this.complete=!1,this.playing=!1,this.stopped=!0,this.pending=!1,this.target=t,this.duration=0,this._currentDelay=0,this.timeScale=1,this._reverse=!1,this._delay=0,this._yoyo=!1,this._count=0,this._numRepeats=0,this._repeatDelay=0,this._from=!1,this._slerp=!1,this._fromQuat=new pc.Quat,this._toQuat=new pc.Quat,this._quat=new pc.Quat,this.easing=pc.Linear,this._sv={},this._ev={}}),"Tween"),i=__name((function(t){var e;return t instanceof pc.Vec2?e={x:t.x,y:t.y}:t instanceof pc.Vec3?e={x:t.x,y:t.y,z:t.z}:t instanceof pc.Vec4||t instanceof pc.Quat?e={x:t.x,y:t.y,z:t.z,w:t.w}:t instanceof pc.Color?(e={r:t.r,g:t.g,b:t.b},void 0!==t.a&&(e.a=t.a)):e=t,e}),"_parseProperties");e.prototype={to:function(t,e,n,s,o,r){return this._properties=i(t),this.duration=e,n&&(this.easing=n),s&&this.delay(s),o&&this.repeat(o),r&&this.yoyo(r),this},from:function(t,e,n,s,o,r){return this._properties=i(t),this.duration=e,n&&(this.easing=n),s&&this.delay(s),o&&this.repeat(o),r&&this.yoyo(r),this._from=!0,this},rotate:function(t,e,n,s,o,r){return this._properties=i(t),this.duration=e,n&&(this.easing=n),s&&this.delay(s),o&&this.repeat(o),r&&this.yoyo(r),this._slerp=!0,this},start:function(){var t,e,i,n;if(this.playing=!0,this.complete=!1,this.stopped=!1,this._count=0,this.pending=this._delay>0,this._reverse&&!this.pending?this.time=this.duration:this.time=0,this._from){for(t in this._properties)this._properties.hasOwnProperty(t)&&(this._sv[t]=this._properties[t],this._ev[t]=this.target[t]);this._slerp&&(this._toQuat.setFromEulerAngles(this.target.x,this.target.y,this.target.z),e=void 0!==this._properties.x?this._properties.x:this.target.x,i=void 0!==this._properties.y?this._properties.y:this.target.y,n=void 0!==this._properties.z?this._properties.z:this.target.z,this._fromQuat.setFromEulerAngles(e,i,n))}else{for(t in this._properties)this._properties.hasOwnProperty(t)&&(this._sv[t]=this.target[t],this._ev[t]=this._properties[t]);this._slerp&&(e=void 0!==this._properties.x?this._properties.x:this.target.x,i=void 0!==this._properties.y?this._properties.y:this.target.y,n=void 0!==this._properties.z?this._properties.z:this.target.z,void 0!==this._properties.w?(this._fromQuat.copy(this.target),this._toQuat.set(e,i,n,this._properties.w)):(this._fromQuat.setFromEulerAngles(this.target.x,this.target.y,this.target.z),this._toQuat.setFromEulerAngles(e,i,n)))}return this._currentDelay=this._delay,this.manager.add(this),this},pause:function(){this.playing=!1},resume:function(){this.playing=!0},stop:function(){this.playing=!1,this.stopped=!0},delay:function(t){return this._delay=t,this.pending=!0,this},repeat:function(t,e){return this._count=0,this._numRepeats=t,this._repeatDelay=e||0,this},loop:function(t){return t?(this._count=0,this._numRepeats=1/0):this._numRepeats=0,this},yoyo:function(t){return this._yoyo=t,this},reverse:function(){return this._reverse=!this._reverse,this},chain:function(){for(var t=arguments.length;t--;)t>0?arguments[t-1]._chained=arguments[t]:this._chained=arguments[t];return this},onUpdate:function(t){return this.on("update",t),this},onComplete:function(t){return this.on("complete",t),this},onLoop:function(t){return this.on("loop",t),this},update:function(t){if(this.stopped)return!1;if(!this.playing)return!0;if(!this._reverse||this.pending?this.time+=t*this.timeScale:this.time-=t*this.timeScale,this.pending){if(!(this.time>this._currentDelay))return!0;this._reverse?this.time=this.duration-(this.time-this._currentDelay):this.time-=this._currentDelay,this.pending=!1}var e=0;(!this._reverse&&this.time>this.duration||this._reverse&&this.time<0)&&(this._count++,this.complete=!0,this.playing=!1,this._reverse?(e=this.duration-this.time,this.time=0):(e=this.time-this.duration,this.time=this.duration));var i,n,s=0===this.duration?1:this.time/this.duration,o=this.easing(s);for(var r in this._properties)this._properties.hasOwnProperty(r)&&(i=this._sv[r],n=this._ev[r],this.target[r]=i+(n-i)*o);if(this._slerp&&this._quat.slerp(this._fromQuat,this._toQuat,o),this.entity&&(this.entity._dirtifyLocal(),this.element&&this.entity.element&&(this.entity.element[this.element]=this.target),this._slerp&&this.entity.setLocalRotation(this._quat)),this.fire("update",t),this.complete){var a=this._repeat(e);return a?this.fire("loop"):(this.fire("complete",e),this.entity&&this.entity.off("destroy",this.stop,this),this._chained&&this._chained.start()),a}return!0},_repeat:function(t){if(this._count<this._numRepeats){if(this._reverse?this.time=this.duration-t:this.time=t,this.complete=!1,this.playing=!0,this._currentDelay=this._repeatDelay,this.pending=!0,this._yoyo){for(var e in this._properties){var i=this._sv[e];this._sv[e]=this._ev[e],this._ev[e]=i}this._slerp&&(this._quat.copy(this._fromQuat),this._fromQuat.copy(this._toQuat),this._toQuat.copy(this._quat))}return!0}return!1}};var n=__name((function(t){return t}),"Linear"),s=__name((function(t){return t*t}),"QuadraticIn"),o=__name((function(t){return t*(2-t)}),"QuadraticOut"),r=__name((function(t){return(t*=2)<1?.5*t*t:-.5*(--t*(t-2)-1)}),"QuadraticInOut"),a=__name((function(t){return t*t*t}),"CubicIn"),c=__name((function(t){return--t*t*t+1}),"CubicOut"),l=__name((function(t){return(t*=2)<1?.5*t*t*t:.5*((t-=2)*t*t+2)}),"CubicInOut"),p=__name((function(t){return t*t*t*t}),"QuarticIn"),h=__name((function(t){return 1- --t*t*t*t}),"QuarticOut"),u=__name((function(t){return(t*=2)<1?.5*t*t*t*t:-.5*((t-=2)*t*t*t-2)}),"QuarticInOut"),d=__name((function(t){return t*t*t*t*t}),"QuinticIn"),f=__name((function(t){return--t*t*t*t*t+1}),"QuinticOut"),y=__name((function(t){return(t*=2)<1?.5*t*t*t*t*t:.5*((t-=2)*t*t*t*t+2)}),"QuinticInOut"),m=__name((function(t){return 0===t?0:1===t?1:1-Math.cos(t*Math.PI/2)}),"SineIn"),g=__name((function(t){return 0===t?0:1===t?1:Math.sin(t*Math.PI/2)}),"SineOut"),b=__name((function(t){return 0===t?0:1===t?1:.5*(1-Math.cos(Math.PI*t))}),"SineInOut"),v=__name((function(t){return 0===t?0:Math.pow(1024,t-1)}),"ExponentialIn"),S=__name((function(t){return 1===t?1:1-Math.pow(2,-10*t)}),"ExponentialOut"),P=__name((function(t){return 0===t?0:1===t?1:(t*=2)<1?.5*Math.pow(1024,t-1):.5*(2-Math.pow(2,-10*(t-1)))}),"ExponentialInOut"),w=__name((function(t){return 1-Math.sqrt(1-t*t)}),"CircularIn"),C=__name((function(t){return Math.sqrt(1- --t*t)}),"CircularOut"),E=__name((function(t){return(t*=2)<1?-.5*(Math.sqrt(1-t*t)-1):.5*(Math.sqrt(1-(t-=2)*t)+1)}),"CircularInOut"),R=__name((function(t){var e,i=.1;return 0===t?0:1===t?1:(!i||i<1?(i=1,e=.1):e=.4*Math.asin(1/i)/(2*Math.PI),-i*Math.pow(2,10*(t-=1))*Math.sin((t-e)*(2*Math.PI)/.4))}),"ElasticIn"),O=__name((function(t){var e,i=.1;return 0===t?0:1===t?1:(!i||i<1?(i=1,e=.1):e=.4*Math.asin(1/i)/(2*Math.PI),i*Math.pow(2,-10*t)*Math.sin((t-e)*(2*Math.PI)/.4)+1)}),"ElasticOut"),T=__name((function(t){var e,i=.1,n=.4;return 0===t?0:1===t?1:(!i||i<1?(i=1,e=.1):e=n*Math.asin(1/i)/(2*Math.PI),(t*=2)<1?i*Math.pow(2,10*(t-=1))*Math.sin((t-e)*(2*Math.PI)/n)*-.5:i*Math.pow(2,-10*(t-=1))*Math.sin((t-e)*(2*Math.PI)/n)*.5+1)}),"ElasticInOut"),j=__name((function(t){var e=1.70158;return t*t*((e+1)*t-e)}),"BackIn"),I=__name((function(t){var e=1.70158;return--t*t*((e+1)*t+e)+1}),"BackOut"),B=__name((function(t){var e=2.5949095;return(t*=2)<1?t*t*((e+1)*t-e)*.5:.5*((t-=2)*t*((e+1)*t+e)+2)}),"BackInOut"),_=__name((function(t){return t<1/2.75?7.5625*t*t:t<2/2.75?7.5625*(t-=1.5/2.75)*t+.75:t<2.5/2.75?7.5625*(t-=2.25/2.75)*t+.9375:7.5625*(t-=2.625/2.75)*t+.984375}),"BounceOut"),D=__name((function(t){return 1-_(1-t)}),"BounceIn"),x=__name((function(t){return t<.5?.5*D(2*t):.5*_(2*t-1)+.5}),"BounceInOut");return{TweenManager:t,Tween:e,Linear:n,QuadraticIn:s,QuadraticOut:o,QuadraticInOut:r,CubicIn:a,CubicOut:c,CubicInOut:l,QuarticIn:p,QuarticOut:h,QuarticInOut:u,QuinticIn:d,QuinticOut:f,QuinticInOut:y,SineIn:m,SineOut:g,SineInOut:b,ExponentialIn:v,ExponentialOut:S,ExponentialInOut:P,CircularIn:w,CircularOut:C,CircularInOut:E,BackIn:j,BackOut:I,BackInOut:B,BounceIn:D,BounceOut:_,BounceInOut:x,ElasticIn:R,ElasticOut:O,ElasticInOut:T}}()),function(){pc.AppBase.prototype.addTweenManager=function(){this._tweenManager=new pc.TweenManager(this),this.on("update",(function(t){this._tweenManager.update(t)}))},pc.AppBase.prototype.tween=function(t){return new pc.Tween(t,this._tweenManager)},pc.Entity.prototype.tween=function(t,e){var i=this._app.tween(t);return i.entity=this,this.once("destroy",i.stop,i),e&&e.element&&(i.element=e.element),i};var t=pc.AppBase.getApplication();t&&t.addTweenManager()}(),pc.Entity.prototype.getScript=function(t){if("string"==typeof t){const e=t;if(this.script)for(let t=0;t<this.script.scripts.length;t++)if(this.script.scripts[t].__scriptType.__name===e){return this.script.scripts[t]}}else{const e=t;if(this.script)for(let t=0;t<this.script.scripts.length;t++){let i=this.script.scripts[t].constructor;for(;i;){if(i===e)return this.script.scripts[t];i=Object.getPrototypeOf(i)}if(this.script.scripts[t].__scriptType.__name===e.constructor.name){return this.script.scripts[t]}const n=this.script.scripts[t].__scriptType.__FFTypeReference;if(n&&(n.prototype instanceof e||n===e)){return this.script.scripts[t]}}}},pc.Entity.prototype.getScriptThatExtends=function(t){return this.getScript(t)},pc.Entity.prototype.getScriptThatImplements=function(t){if(this.script)for(let e=0;e<this.script.scripts.length;e++){const i=this.script.scripts[e].__scriptType.__FFTypeReference,n=i.interfaces?.includes(t);if(i&&n){return this.script.scripts[e]}}console.error("Did not find script that implements "+t+'. Make sure that the concrete class contains property: public static interfaces: string[] = ["'+t+'"];')},pc.Entity.prototype.getScriptInChildren=function(t){const e=this.findOne((e=>e instanceof pc.Entity&&e.script?.has(t.name)));if(e)return e.script.get(t.name)},pc.Entity.prototype.getScriptsInChildren=function(t){const e=this.find((e=>e instanceof pc.Entity&&e.script?.has(t.name)));return e&&e.length>0?e.map((e=>e.script.get(t.name))):[]},pc.Entity.prototype.getScriptInParents=function(t){let e=this;for(;e;){const i=e.getScript(t);if(i)return i;e=e.parent}},pc.Entity.prototype.getScriptsInParents=function(t){let e=[],i=this;for(;i;){const n=i.getScript(t);n&&e.push(n),i=i.parent}return e},pc.Vec3.prototype.toAngleOnYPlane=function(){return Math.atan2(this.x,this.z)},pc.Vec3.prototype.toAngleOnZPlane=function(){return Math.atan2(this.y,this.x)},pc.Vec3.prototype.fromAngleOnZPlane=function(t){return this.x=Math.cos(t),this.y=Math.sin(t),this.z=0,this},pc.Vec3.prototype.onYPlane=function(){return new pc.Vec2(this.x,this.z)},pc.Vec3.prototype.onZPlane=function(){return new pc.Vec2(this.x,this.y)};var e="__FFAttributes";function prettifyName(t){const e=[];for(let i=0;i<t.length;i++){const n=t[i],s=n.toUpperCase(),o=s===n;0===i?e.push(s):o&&i<t.length-1&&t[i+1].toUpperCase()!==t[i+1]?e.push(" ",s):e.push(n)}return e.join("")}function isRaised(t,e){return 0!=(t&e)}function mergeAttributesObject(t,i,n){t.hasOwnProperty(e)||(t.__FFAttributes={});const s=t.__FFAttributes[i]??{};Object.assign(s,n),t.__FFAttributes[i]=s}function stripUndefined(t){const e={...t};for(const t in e)void 0===e[t]&&delete e[t];return e}function getEnumKeyValuePairs(t){const e=[];for(const i in t)if(isNaN(parseInt(i))){const n={};n[prettifyName(i)]=t[i],e.push(n)}return e}function createBasicAttributeObject(t,e){let i,n,s=isRaised(t,268435456);s||(s=void 0);let o=s?e??[]:e??void 0;return isRaised(t,2)?(i="boolean",o=o??!1):isRaised(t,1)?(i="string",o=o??""):isRaised(t,4)?(i="number",o=o??0):isRaised(t,8)?(i="json",o=void 0):isRaised(t,32)?(i="rgba",o=o??[0,0,0,255]):isRaised(t,1024)?(i="entity",o=o??null):isRaised(t,64)?(i="curve",o=o??null):isRaised(t,2048)?(i="asset",o=o??null):isRaised(t,4096)?(i="asset",o=o??null,n="material"):isRaised(t,8192)?(i="asset",o=o??null,n="texture"):isRaised(t,65536)?(i="asset",o=o??null,n="sprite"):isRaised(t,131072)?(i="vec2",o=o??[0,0]):isRaised(t,262144)?(i="vec3",o=o??[0,0,0]):isRaised(t,16384)?(i="asset",o=o??null,n="json"):isRaised(t,32768)&&(i="asset",o=o??null,n="template"),stripUndefined({type:i,array:s,default:o,assetType:n})}function attribute(t,e,i,n){return function(s,o){mergeAttributesObject(s,o,stripUndefined({...createBasicAttributeObject(t,e),title:n,description:i}))}}function component(){return function(t){const e=t.name,i={};let n=t.prototype;for(;null!=n&&n!==Object;){let t=n.__FFAttributes??null;null!=t&&Object.assign(i,t),n=Object.getPrototypeOf(n)}pc.registerScript(t,e);let s=t;for(let t in i)i[t].title||(i[t].title=prettifyName(t)),i[t].schema&&i[t].schema.reverse(),s.attributes.add(t,{...i[t]})}}function enumType(t){return function(e,i){mergeAttributesObject(e,i,{enum:getEnumKeyValuePairs(t)})}}function range(t,e){return function(i,n){mergeAttributesObject(i,n,{min:t,max:e})}}function schemaJson(t,e,i,n){return function(s,o){const r=s.__FFAttributes&&s.__FFAttributes[o]&&s.__FFAttributes[o].schema?[...s.__FFAttributes[o].schema]:[];r.push(stripUndefined({name:t,title:n??prettifyName(t),...createBasicAttributeObject(e,i)})),mergeAttributesObject(s,o,{schema:r})}}function schemaJsonEnum(t,e,i,n,s){return function(o,r){const a=o.__FFAttributes&&o.__FFAttributes[r]&&o.__FFAttributes[r].schema?[...o.__FFAttributes[r].schema]:[];let c=isRaised(i,1);a.push(stripUndefined({name:t,title:s??prettifyName(t),type:c?"string":"number",default:n??(c?"":0),enum:getEnumKeyValuePairs(e)})),mergeAttributesObject(o,r,{schema:a})}}__name(prettifyName,"prettifyName"),__name(isRaised,"isRaised"),__name(mergeAttributesObject,"mergeAttributesObject"),__name(stripUndefined,"stripUndefined"),__name(getEnumKeyValuePairs,"getEnumKeyValuePairs"),__name(createBasicAttributeObject,"createBasicAttributeObject"),__name(attribute,"attribute"),__name(component,"component"),__name(enumType,"enumType"),__name(range,"range"),__name(schemaJson,"schemaJson"),__name(schemaJsonEnum,"schemaJsonEnum");var i,n,s,o,r,__decorate=function(t,e,i,n){var s,o=arguments.length,r=o<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,i,n);else for(var a=t.length-1;a>=0;a--)(s=t[a])&&(r=(o<3?s(r):o>3?s(e,i,r):s(e,i))||r);return o>3&&r&&Object.defineProperty(e,i,r),r},__metadata=function(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)},a=__name(class BezierCurve2 extends pc.ScriptType{getPoint(t){const e=1-(t=pc.math.clamp(t,0,1)),i=this.startPosition.clone().mulScalar(e*e*e),n=this.startControl.clone().mulScalar(3*e*e*t),s=this.endControl.clone().mulScalar(3*e*t*t),o=this.endPosition.clone().mulScalar(t*t*t);return i.add(n).add(s).add(o)}getDirection(t){const e=1-(t=pc.math.clamp(t,0,1)),i=this.startControl.clone().sub(this.startPosition).mulScalar(3*e*e),n=this.endControl.clone().sub(this.startControl).mulScalar(6*e*t),s=this.endPosition.clone().sub(this.endControl).mulScalar(3*t*t);return i.add(n).add(s).normalize()}},"BezierCurve");__decorate([attribute(262144),__metadata("design:type","function"==typeof(i="undefined"!=typeof pc&&pc.Vec3)?i:Object)],a.prototype,"startPosition",void 0),__decorate([attribute(262144),__metadata("design:type","function"==typeof(n="undefined"!=typeof pc&&pc.Vec3)?n:Object)],a.prototype,"endPosition",void 0),__decorate([attribute(262144),__metadata("design:type","function"==typeof(s="undefined"!=typeof pc&&pc.Vec3)?s:Object)],a.prototype,"startControl",void 0),__decorate([attribute(262144),__metadata("design:type","function"==typeof(o="undefined"!=typeof pc&&pc.Vec3)?o:Object)],a.prototype,"endControl",void 0),a=__decorate([component()],a);var c=__name(class BezierTester2 extends pc.ScriptType{initialize(){this.bezierCurve=this.bezierCurveEntity.getScript(a),this.elapsedTime=0}update(t){this.elapsedTime+=t;const e=.5*Math.sin(.5*this.elapsedTime)+.5,i=this.bezierCurve.getPoint(e),n=this.bezierCurve.getDirection(e);this.entity.setPosition(i),this.entity.lookAt(n.mulScalar(10))}},"BezierTester");__decorate([attribute(1024),__metadata("design:type","function"==typeof(r="undefined"!=typeof pc&&pc.Entity)?r:Object)],c.prototype,"bezierCurveEntity",void 0),c=__decorate([component()],c);var l=(t=>(t[t.Bullet=0]="Bullet",t[t.ShotgunShell=1]="ShotgunShell",t[t.Shuriken=2]="Shuriken",t[t.Grenade=3]="Grenade",t[t.CherryBomb=4]="CherryBomb",t[t.Pistol=5]="Pistol",t[t.Landmine=6]="Landmine",t[t.Uzi=7]="Uzi",t[t.JerryCan=8]="JerryCan",t[t.C4=9]="C4",t[t.Nuke=10]="Nuke",t[t.Tank=11]="Tank",t[t.Jet=12]="Jet",t))(l||{}),p=class{};__name(p,"FFEvents"),p.OnDestroy="destroy",p.OnPause="onPause",p.OnResume="onResume",p.OnIOSResume="onIOSResume",p.HoleChangedLevel="holeChangedLevel",p.HoleChangedSize="holeChangedSize",p.HoleAteSomething="holeAteSomething",p.GameStateChanged="gameStateChanged",p.CoreStarted="gameStart",p.GameOver="gameOver",p.LevelLoaded="levelLoaded",p.LevelUnloaded="levelUnloaded",p.GameTimerTick="gameTimerTick",p.PointsGained="pointsGained",p.BossPhaseStarted="bossPhaseStarted",p.BossPhasePlayerDefeat="bossPhasePlayerDefeat",p.BossPhaseReadyToPlay="bossPhaseReadyToPlay",p.BossHealthChanged="bossHealthChanged",p.BossBeginAttack="bossBeginAttack",p.BossStartFiring="bossStartFiring",p.BossEndFiring="bossEndFiring",p.BossAmmoSpent="bossAmmoSpent",p.BossDefeated="bossDefeated",p.BossDefeatAnimationDone="bossPlayerDefeatAnimationDone";var h=class{};__name(h,"Dictionary");var u,d,__decorate2=function(t,e,i,n){var s,o=arguments.length,r=o<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,i,n);else for(var a=t.length-1;a>=0;a--)(s=t[a])&&(r=(o<3?s(r):o>3?s(e,i,r):s(e,i))||r);return o>3&&r&&Object.defineProperty(e,i,r),r},__awaiter=function(t,e,i,n){function adopt(t){return t instanceof i?t:new i((function(e){e(t)}))}return __name(adopt,"adopt"),new(i||(i=Promise))((function(i,s){function fulfilled(t){try{step(n.next(t))}catch(t){s(t)}}function rejected(t){try{step(n.throw(t))}catch(t){s(t)}}function step(t){t.done?i(t.value):adopt(t.value).then(fulfilled,rejected)}__name(fulfilled,"fulfilled"),__name(rejected,"rejected"),__name(step,"step"),step((n=n.apply(t,e||[])).next())}))};(d=u||(u={})).MAIN="Main",d.MENU="Menu",d.GAME="Game";var f=__name(class SceneChanger2 extends pc.ScriptType{initialize(){this.sceneInfo=new h,this.sceneInfo[u.MAIN]={id:"1976406",controller:null,controllerName:""},this.sceneInfo[u.GAME]={id:"1965946",controller:null,controllerName:""},this.currentScene=this.findSceneController(this.sceneInfo[u.MAIN])}changeScene(t,e){return __awaiter(this,void 0,void 0,(function*(){var i=this.sceneInfo[t];if(i){this.currentScene&&(this.verbose&&console.log("Disabling",this.currentScene.name),yield this.currentScene.disableScene()),yield this.loadAssetsForScene(t,e),yield this.loadScene(t);var n=this.findSceneController(i);n&&(this.currentScene=n,this.verbose&&console.log("Enabling",t),yield this.currentScene.enableScene())}else console.warn("Could not find scene with name:",t)}))}loadAssetsForScene(t,e){return __awaiter(this,void 0,void 0,(function*(){this.verbose&&console.log("Loading",t);let i=this.app.assets.findByTag(t),n=null!=e?this.app.assets.findByTag("theme"+e):null,s=void 0!==e?[].concat(i,n):i;this.verbose&&console.log("Loading assets for",t,`(${i.length})`,"With theme",e,`(${null==n?void 0:n.length})`,"Total:",s.length),this.loadedAssets&&this.unloadAssets(this.loadedAssets.filter((t=>!s.includes(t)))),yield this.loadAssets(s,((t,e,i)=>{})),this.loadedAssets=s,this.verbose&&console.log("Loaded assets for",t)}))}loadScene(t){return __awaiter(this,void 0,void 0,(function*(){var e=this.sceneInfo[t];return new Promise((i=>{this.app.scenes.loadSceneHierarchy(e.id+".json",(n=>{n?console.log("Recieved error loading scene with ID",e.id,n):this.verbose&&console.log("Loaded",t),i()}))}))}))}loadAssets(t,e){return __awaiter(this,void 0,void 0,(function*(){var i=0,n=t.length;for(const s of t)s.ready((t=>{i++,null==e||e(t,i,n)}),this),s.loaded||s.loading||this.app.assets.load(s)}))}unloadAssets(t){for(const e of t)this.verbose&&console.log("Unloading",e.name),e.unload()}findSceneController(t){return null}},"SceneChanger");__decorate2([attribute(2,!1),function(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)}("design:type",Boolean)],f.prototype,"verbose",void 0),f=__decorate2([component()],f);var y=class{static async forMilis(t){return new Promise((e=>setTimeout(e,t)))}static async forSeconds(t){await this.forMilis(1e3*t)}static async untill(t){await this.until(t)}static async until(t){return new Promise((e=>this.untilHelper(t,e)))}static async while(t){return new Promise((e=>this.untilHelper((()=>!t()),e)))}static async forEvents(t,...e){let i=!1;const n=__name((()=>{i=!0;for(const i of e)t.off(i,n,this)}),"eventEnounter");for(const i of e)t.on(i,n,this);return new Promise((t=>this.untilHelper((()=>i),t)))}static async forAllEvents(t,...e){let i=e.length;for(const n of e)t.once(n,(()=>{i--}),this);return new Promise((t=>this.untilHelper((()=>0===i),t)))}static async forNextFrame(){return new Promise((t=>{pc.Application.getApplication().once("update",t,this)}))}static async untilHelper(t,e){t()?e():setTimeout((()=>this.untilHelper(t,e)),20)}};__name(y,"Wait");var m=__name(class Prop2 extends pc.ScriptType{init(t){this.parent=t}},"Prop");m=function(t,e,i,n){var s,o=arguments.length,r=o<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,i,n);else for(var a=t.length-1;a>=0;a--)(s=t[a])&&(r=(o<3?s(r):o>3?s(e,i,r):s(e,i))||r);return o>3&&r&&Object.defineProperty(e,i,r),r}([component()],m);var g,b=g=__name(class ConsumableManager2 extends pc.ScriptType{static get instance(){return this._instance}postInitialize(){return function(t,e,i,n){function adopt(t){return t instanceof i?t:new i((function(e){e(t)}))}return __name(adopt,"adopt"),new(i||(i=Promise))((function(i,s){function fulfilled(t){try{step(n.next(t))}catch(t){s(t)}}function rejected(t){try{step(n.throw(t))}catch(t){s(t)}}function step(t){t.done?i(t.value):adopt(t.value).then(fulfilled,rejected)}__name(fulfilled,"fulfilled"),__name(rejected,"rejected"),__name(step,"step"),step((n=n.apply(t,e||[])).next())}))}(this,void 0,void 0,(function*(){this.consumables=[],this.consumableRecord={},this.maxId=15,g._instance=this}))}registerConsumable(t){this.consumables[t.levelRequired]||(this.consumables[t.levelRequired]=[]),this.consumables[t.levelRequired].push(t),this.consumableRecord[t.id]=t,this.maxId=Math.max(t.id,this.maxId)}unregisterConsumable(t){this.removeConsumable(t)}getConsumables(){return this.consumables}removeConsumable(t){let e=this.consumables[t.levelRequired];this.removeConsumableFromList(t,e)}removeConsumableFromList(t,e){if(void 0===e)return;let i=e.length;if(0!==i)if(1===i)this.consumables[t.levelRequired]=void 0;else{let n=e.indexOf(t);e[n]=e[i-1],e.pop()}}},"ConsumableManager");b=g=function(t,e,i,n){var s,o=arguments.length,r=o<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,i,n);else for(var a=t.length-1;a>=0;a--)(s=t[a])&&(r=(o<3?s(r):o>3?s(e,i,r):s(e,i))||r);return o>3&&r&&Object.defineProperty(e,i,r),r}([component()],b);var v=class{};__name(v,"Input"),v.PointerDown="onInputDown",v.PointerPressed="onInput",v.PointerUp="onInputUp";var S=class{constructor(t){this.enabled=!1,this.app=t,this.lastInput=new pc.Vec2,this.currentInput=new pc.Vec2,this.registerInput(),this.app.on(p.OnPause,this.onPause,this)}tearDown(){this.unregisterInput(),this.app.off(p.OnPause,this.onPause,this)}registerInput(){this.app.touch&&(this.app.touch.on(pc.EVENT_TOUCHSTART,this.onInputStart,this),this.app.touch.on(pc.EVENT_TOUCHMOVE,this.onInput,this),this.app.touch.on(pc.EVENT_TOUCHEND,this.onInputEnd,this),this.app.touch.on(pc.EVENT_TOUCHCANCEL,this.onInputEnd,this)),this.app.mouse&&(this.app.mouse.on(pc.EVENT_MOUSEDOWN,this.onInputStart,this),this.app.mouse.on(pc.EVENT_MOUSEMOVE,this.onInput,this),this.app.mouse.on(pc.EVENT_MOUSEUP,this.onInputEnd,this))}unregisterInput(){this.app.touch&&(this.app.touch.off(pc.EVENT_TOUCHSTART,this.onInputStart,this),this.app.touch.off(pc.EVENT_TOUCHMOVE,this.onInput,this),this.app.touch.off(pc.EVENT_TOUCHEND,this.onInputEnd,this),this.app.touch.off(pc.EVENT_TOUCHCANCEL,this.onInputEnd,this)),this.app.mouse&&(this.app.mouse.off(pc.EVENT_MOUSEDOWN,this.onInputStart,this),this.app.mouse.off(pc.EVENT_MOUSEMOVE,this.onInput,this),this.app.mouse.off(pc.EVENT_MOUSEUP,this.onInputEnd,this))}onInputStart(t){this.enabled&&(this.inputDown=!0,t.touches?this.lastInput.copy(t.touches[0]):this.lastInput.copy(t),this.currentInput.copy(this.lastInput),this.app.fire(v.PointerDown,this.currentInput))}onInput(t){t.event.preventDefault(),this.enabled&&this.inputDown&&(t.touches?this.currentInput.copy(t.touches[0]):this.currentInput.copy(t),this.app.fire(v.PointerPressed,this.currentInput))}onInputEnd(t){t.event.preventDefault(),this.enabled&&(this.inputDown=!1,this.app.fire(v.PointerUp,this.currentInput))}onPause(){this.currentInput=pc.Vec2.ZERO.clone(),this.app.fire(v.PointerUp,this.currentInput)}};__name(S,"InputManager");var P=__name(class BossHole2 extends pc.ScriptType{initialize(){this.defaultPosition=this.entity.getPosition().clone(),this.defaultScale=this.entity.getLocalScale().clone()}playBossDefeatAnimation(t,e){return function(t,e,i,n){function adopt(t){return t instanceof i?t:new i((function(e){e(t)}))}return __name(adopt,"adopt"),new(i||(i=Promise))((function(i,s){function fulfilled(t){try{step(n.next(t))}catch(t){s(t)}}function rejected(t){try{step(n.throw(t))}catch(t){s(t)}}function step(t){t.done?i(t.value):adopt(t.value).then(fulfilled,rejected)}__name(fulfilled,"fulfilled"),__name(rejected,"rejected"),__name(step,"step"),step((n=n.apply(t,e||[])).next())}))}(this,void 0,void 0,(function*(){return new Promise((i=>{const n={t:0},s=this.entity.getPosition().clone(),o=this.entity.getLocalScale().clone(),r=new pc.Vec3(6,1,6),a=this.entity.tween(n);a.to({t:1},e,pc.Linear),a.onUpdate((()=>{const e=s.clone().lerp(s,t,n.t);this.entity.setPosition(e);const i=o.clone().lerp(o,r,n.t);this.entity.setLocalScale(i)})),a.onComplete((()=>{i()})),a.start()}))}))}reset(){this.entity.setPosition(this.defaultPosition.clone()),this.entity.setLocalScale(this.defaultScale.clone())}},"BossHole");P=function(t,e,i,n){var s,o=arguments.length,r=o<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,i,n);else for(var a=t.length-1;a>=0;a--)(s=t[a])&&(r=(o<3?s(r):o>3?s(e,i,r):s(e,i))||r);return o>3&&r&&Object.defineProperty(e,i,r),r}([component()],P);var w,__decorate6=function(t,e,i,n){var s,o=arguments.length,r=o<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,i,n);else for(var a=t.length-1;a>=0;a--)(s=t[a])&&(r=(o<3?s(r):o>3?s(e,i,r):s(e,i))||r);return o>3&&r&&Object.defineProperty(e,i,r),r},__awaiter4=function(t,e,i,n){function adopt(t){return t instanceof i?t:new i((function(e){e(t)}))}return __name(adopt,"adopt"),new(i||(i=Promise))((function(i,s){function fulfilled(t){try{step(n.next(t))}catch(t){s(t)}}function rejected(t){try{step(n.throw(t))}catch(t){s(t)}}function step(t){t.done?i(t.value):adopt(t.value).then(fulfilled,rejected)}__name(fulfilled,"fulfilled"),__name(rejected,"rejected"),__name(step,"step"),step((n=n.apply(t,e||[])).next())}))},C=__name(class UILoadingScreen2 extends pc.ScriptType{constructor(){super(...arguments),this.tween=null,this.isFirstLoad=!0}showLoadingScreen(t=1){return __awaiter4(this,void 0,void 0,(function*(){return new Promise((e=>{this.stopExistingTween(),this.tween=this.createTween(1,t),this.tween.onComplete((()=>{this.tween=null,this.textEntity.enabled=!0,e()})),this.entity.enabled=!0,this.tweenPromiseResolve=e,this.tween.start()}))}))}hideLoadingScreen(t=1){return __awaiter4(this,void 0,void 0,(function*(){return new Promise((e=>{this.stopExistingTween(),this.tween=this.createTween(0,t),this.tween.onComplete((()=>{this.tween=null,this.entity.enabled=!1,e()})),this.textEntity.enabled=!1,this.tweenPromiseResolve=e,this.tween.start()}))}))}createTween(t,e){const i=this.entity.element.opacity,n={t:0},s=this.entity.tween(n);return s.to({t:1},e,pc.Linear),s.onUpdate((()=>{this.entity.element.opacity=pc.math.lerp(i,t,n.t)})),s}stopExistingTween(){this.tween&&(this.tween.stop(),this.tweenPromiseResolve(),this.tween=null)}},"UILoadingScreen");__decorate6([attribute(1024),function(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)}("design:type","function"==typeof(w="undefined"!=typeof pc&&pc.Entity)?w:Object)],C.prototype,"textEntity",void 0),C=__decorate6([component()],C);var E,R,__decorate7=function(t,e,i,n){var s,o=arguments.length,r=o<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,i,n);else for(var a=t.length-1;a>=0;a--)(s=t[a])&&(r=(o<3?s(r):o>3?s(e,i,r):s(e,i))||r);return o>3&&r&&Object.defineProperty(e,i,r),r},__metadata4=function(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)},O=__name(class UISplashScreen2 extends pc.ScriptType{constructor(){super(...arguments),this.hasClicked=!1,this.isClickValid=!1}initialize(){const t=pc.platform.mobile,e=t?"TAP":"CLICK";this.instructionEntity.element.text=`${e} ${this.instructionEntity.element.text}`,t?(this.inputCaptureEntity.element.on("touchstart",this.onTouchStart,this),this.inputCaptureEntity.element.on("touchend",this.onTouchEnd,this),this.inputCaptureEntity.element.on("touchmove",this.onTouchMove,this)):this.inputCaptureEntity.element.on("click",this.onClick,this),this.entity.enabled=!1}show(){return function(t,e,i,n){function adopt(t){return t instanceof i?t:new i((function(e){e(t)}))}return __name(adopt,"adopt"),new(i||(i=Promise))((function(i,s){function fulfilled(t){try{step(n.next(t))}catch(t){s(t)}}function rejected(t){try{step(n.throw(t))}catch(t){s(t)}}function step(t){t.done?i(t.value):adopt(t.value).then(fulfilled,rejected)}__name(fulfilled,"fulfilled"),__name(rejected,"rejected"),__name(step,"step"),step((n=n.apply(t,e||[])).next())}))}(this,void 0,void 0,(function*(){return this.entity.enabled=!0,new Promise((t=>{const e=window.setInterval((()=>{this.hasClicked&&(window.clearInterval(e),this.entity.enabled=!1,t())}),10)}))}))}onTouchStart(){this.isClickValid=!0}onTouchEnd(){this.isClickValid&&(this.hasClicked=!0)}onTouchMove(){this.isClickValid=!1}onClick(){this.hasClicked=!0}},"UISplashScreen");__decorate7([attribute(1024),__metadata4("design:type","function"==typeof(E="undefined"!=typeof pc&&pc.Entity)?E:Object)],O.prototype,"instructionEntity",void 0),__decorate7([attribute(1024),__metadata4("design:type","function"==typeof(R="undefined"!=typeof pc&&pc.Entity)?R:Object)],O.prototype,"inputCaptureEntity",void 0),O=__decorate7([component()],O);var T,j,I,B,__decorate8=function(t,e,i,n){var s,o=arguments.length,r=o<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,i,n);else for(var a=t.length-1;a>=0;a--)(s=t[a])&&(r=(o<3?s(r):o>3?s(e,i,r):s(e,i))||r);return o>3&&r&&Object.defineProperty(e,i,r),r},__metadata5=function(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)},_=T=__name(class PersistentUI2 extends pc.ScriptType{get loadingScreen(){return this._loadingScreen}get splashScreen(){return this._splashScreen}static get instance(){return this._instance}initialize(){T._instance=this,window.persistentUI=this,this._loadingScreen=this.loadingScreenEntity.getScript(C),this._splashScreen=this.splashScreenEntity.getScript(O),this.app.on(p.LevelLoaded,this.onLevelLoaded,this),this.entity.on(p.OnDestroy,(()=>{T._instance=null,this.app.off(p.LevelLoaded,this.onLevelLoaded,this)}),this)}onLevelLoaded(t){this.levelIndicatorEntity.element.text=`Level ${t}`}},"PersistentUI");__decorate8([attribute(1024),__metadata5("design:type","function"==typeof(j="undefined"!=typeof pc&&pc.Entity)?j:Object)],_.prototype,"levelIndicatorEntity",void 0),__decorate8([attribute(1024),__metadata5("design:type","function"==typeof(I="undefined"!=typeof pc&&pc.Entity)?I:Object)],_.prototype,"loadingScreenEntity",void 0),__decorate8([attribute(1024),__metadata5("design:type","function"==typeof(B="undefined"!=typeof pc&&pc.Entity)?B:Object)],_.prototype,"splashScreenEntity",void 0),_=T=__decorate8([component()],_);var D,x,A,M,__decorate9=function(t,e,i,n){var s,o=arguments.length,r=o<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,i,n);else for(var a=t.length-1;a>=0;a--)(s=t[a])&&(r=(o<3?s(r):o>3?s(e,i,r):s(e,i))||r);return o>3&&r&&Object.defineProperty(e,i,r),r},__metadata6=function(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)},__awaiter6=function(t,e,i,n){function adopt(t){return t instanceof i?t:new i((function(e){e(t)}))}return __name(adopt,"adopt"),new(i||(i=Promise))((function(i,s){function fulfilled(t){try{step(n.next(t))}catch(t){s(t)}}function rejected(t){try{step(n.throw(t))}catch(t){s(t)}}function step(t){t.done?i(t.value):adopt(t.value).then(fulfilled,rejected)}__name(fulfilled,"fulfilled"),__name(rejected,"rejected"),__name(step,"step"),step((n=n.apply(t,e||[])).next())}))},L=D=__name(class BossController2 extends pc.ScriptType{constructor(){super(...arguments),this.paused=!1}initialize(){this.bossHole=this.bossHoleEntity.getScript(P),this.animator=this.animatorEntity.animation,this.animatorEntity.enabled=!1,this.defaultPosition=this.entity.getPosition().clone(),this.defaultRotation=this.entity.getEulerAngles().clone(),this.app.on(p.OnPause,this.onPause,this),this.app.on(p.OnResume,this.onResume,this),this.app.on(p.BossPhaseStarted,this.onBossPhaseStarted,this),this.app.on(p.BossDefeated,this.onBossDefeated,this),this.entity.once(p.OnDestroy,(()=>{this.app.off(p.OnPause,this.onPause,this),this.app.off(p.OnResume,this.onResume,this),this.app.off(p.BossPhaseStarted,this.onBossPhaseStarted,this),this.app.off(p.BossDefeated,this.onBossDefeated,this)}),this)}reset(){this.bossHole.reset(),this.entity.setPosition(this.defaultPosition.clone()),this.entity.setEulerAngles(this.defaultRotation.clone()),this.animatorEntity.enabled=!1,this.animator.speed=1}beginWalking(t=15){this.walkTween&&this.walkTween.stop();const e={t:0},i=this.entity.getPosition().clone();this.walkTween=this.entity.tween(e),this.walkTween.to({t:1},t,pc.Linear),this.walkTween.onUpdate((()=>{const t=i.clone().lerp(i,this.endPointEntity.getPosition(),e.t);this.entity.setPosition(t)})),this.walkTween.onComplete((()=>__awaiter6(this,void 0,void 0,(function*(){this.app.fire(p.BossBeginAttack);const t=this.animator.getAnimation(D.ATTACK_ANIM).duration;this.animator.speed=1,this.animator.loop=!1,this.animator.play(D.ATTACK_ANIM,.2),this.walkTween=null,yield y.forSeconds(.5*t),this.app.fire(p.BossPhasePlayerDefeat)})))),this.animator.speed=15/t,this.animator.play(D.WALK_ANIM,.2),this.walkTween.start()}playLandingAnimation(){return __awaiter6(this,void 0,void 0,(function*(){const t=this.animator.getAnimation(D.LANDING_ANIM).duration;this.animator.loop=!1,this.animator.play(D.LANDING_ANIM),yield y.forSeconds(t)}))}playDefeatAnimation(){return __awaiter6(this,void 0,void 0,(function*(){const t=new Promise((t=>{const e={t:0},i=this.entity.getEulerAngles().clone(),n=this.entity.getPosition().clone(),s=n.clone().add(new pc.Vec3(0,-4,0)),o=this.entity.tween(e);o.to({t:1},2,pc.BackIn),o.onUpdate((()=>{const t=i.clone().lerp(i,new pc.Vec3(140,0,0),e.t);this.entity.setEulerAngles(t);const o=Math.max(0,e.t-.7)/.3,r=n.clone().lerp(n,s,o);this.entity.setPosition(r)})),o.onComplete((()=>{t()})),o.start()}));yield Promise.all([t,this.bossHole.playBossDefeatAnimation(this.entity.getPosition().clone(),1.5)]),yield y.forSeconds(2),this.app.fire(p.BossDefeatAnimationDone)}))}onPause(){this.paused=!0,this.walkTween&&this.walkTween.pause()}onResume(){this.paused=!1,this.walkTween&&this.walkTween.resume()}onBossPhaseStarted(t){return __awaiter6(this,void 0,void 0,(function*(){yield y.forSeconds(1),yield _.instance.loadingScreen.hideLoadingScreen(),this.animatorEntity.enabled=!0,yield this.playLandingAnimation(),this.animator.speed=1,this.animator.loop=!0,this.animator.play(D.IDLE_ANIM),yield y.forSeconds(1),this.app.fire(p.BossPhaseReadyToPlay,t.bossMaxHealth)}))}onBossDefeated(){return __awaiter6(this,void 0,void 0,(function*(){this.animator.speed=1,this.animator.loop=!0,this.animator.play(D.IDLE_ANIM,.2),this.walkTween&&(this.walkTween.stop(),this.walkTween=null),yield this.playDefeatAnimation()}))}},"BossController");L.LANDING_ANIM="landing",L.IDLE_ANIM="idle",L.WALK_ANIM="walk",L.ATTACK_ANIM="attack",__decorate9([attribute(1024),__metadata6("design:type","function"==typeof(x="undefined"!=typeof pc&&pc.Entity)?x:Object)],L.prototype,"animatorEntity",void 0),__decorate9([attribute(1024),__metadata6("design:type","function"==typeof(A="undefined"!=typeof pc&&pc.Entity)?A:Object)],L.prototype,"endPointEntity",void 0),__decorate9([attribute(1024),__metadata6("design:type","function"==typeof(M="undefined"!=typeof pc&&pc.Entity)?M:Object)],L.prototype,"bossHoleEntity",void 0),L=D=__decorate9([component()],L);var z=class{static convertErrorToString(t){return t instanceof Error?t.message:t instanceof Object?JSON.stringify(t):t.toString()}};__name(z,"ErrorUtils");var N,F,V,U,H,__decorate10=function(t,e,i,n){var s,o=arguments.length,r=o<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,i,n);else for(var a=t.length-1;a>=0;a--)(s=t[a])&&(r=(o<3?s(r):o>3?s(e,i,r):s(e,i))||r);return o>3&&r&&Object.defineProperty(e,i,r),r},__metadata7=function(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)},__awaiter7=function(t,e,i,n){function adopt(t){return t instanceof i?t:new i((function(e){e(t)}))}return __name(adopt,"adopt"),new(i||(i=Promise))((function(i,s){function fulfilled(t){try{step(n.next(t))}catch(t){s(t)}}function rejected(t){try{step(n.throw(t))}catch(t){s(t)}}function step(t){t.done?i(t.value):adopt(t.value).then(fulfilled,rejected)}__name(fulfilled,"fulfilled"),__name(rejected,"rejected"),__name(step,"step"),step((n=n.apply(t,e||[])).next())}))};(H=U||(U={}))[H.NoVersionInfo=10]="NoVersionInfo",H[H.NoEnvironment=12]="NoEnvironment",H[H.DefaultQualityFailure=25]="DefaultQualityFailure",H[H.GameReadyFailure=26]="GameReadyFailure",H[H.Unknown=1e4]="Unknown";var k=N=__name(class StartupLoader2 extends pc.ScriptType{static get instance(){return this._instance}static get uniqueRemoteJsId(){return N._uniqueRemoteJsId}initialize(){N._instance=this,this._isProd="launch.playcanvas.com"!==window.location.hostname,this.isProd()&&ytgame.game.firstFrameReady(),this.disableVersionInfoTextToPreventDomClash(),this.versionInfo?this.versionInfoJson=this.versionInfo.resource:this.fireStartupFailureEvent(U.NoVersionInfo,"No versionInfo assigned to StartupLoader! Aborting. Create with 'npm run download'")}postInitialize(){return __awaiter7(this,void 0,void 0,(function*(){try{this.removeDomVersionNumber(),this.setVersionNumber(),this.onGameReady()}catch(t){this.fireStartupFailureEvent(U.Unknown,t)}}))}update(){this.isProd()||(this.app.keyboard.isPressed(pc.KEY_P)?this.app.fire(p.OnPause):this.app.keyboard.isPressed(pc.KEY_R)&&this.app.fire(p.OnResume))}getEnvironment(){const t=this.environment;if(!t)throw new Error("Environment missing in 'config.environments.json'.");return t}isProd(){return this._isProd}onGameReady(){return __awaiter7(this,void 0,void 0,(function*(){try{N.instance.isProd()&&(ytgame.system.onAudioEnabledChange(this.handleAudioChange.bind(this)),this.handleAudioChange(ytgame.system.isAudioEnabled()),ytgame.system.onPause((()=>{this.app.fire(p.OnPause)})),ytgame.system.onResume((()=>{this.app.fire(p.OnResume)})));if(pc.platform.ios){this.app.systems.sound.manager._resume=function(){}.bind(this.app.systems.sound.manager);const t=(t=>__awaiter7(this,void 0,void 0,(function*(){t.preventDefault(),"interrupted"===this.app.systems.sound.manager._context.state&&(yield this.app.systems.sound.manager._context.suspend()),"running"!==this.app.systems.sound.manager._context.state&&(yield this.app.systems.sound.manager._context.resume()),this.app.fire(p.OnIOSResume)}))).bind(this);window.addEventListener("touchmove",t,!1),window.addEventListener("touchstart",t,!1),window.addEventListener("touchend",t,!1)}return this.app.fire(N.EVENT_GAME_READY),yield wt.instance.sceneChanger.changeScene(u.GAME),!0}catch(t){return this.fireStartupFailureEvent(U.GameReadyFailure,t),!1}}))}setVersionNumber(){this.versionTextfield&&(this.versionTextfield.element.text=this.getVersion(),this.setDomVersionNumber())}getVersion(){const t=this.versionInfoJson.version,e=this.getEnvironment().short;return`${t.Major}.${t.Minor}.${t.Patch}.${t.Build}${e}`}handleAudioChange(t){this.app.systems.sound.volume=t?1:0}fireStartupFailureEvent(t,e){const i=z.convertErrorToString(e);this.verbose&&console.error(i),this.app.fire(N.EVENT_START_FAILURE,t,i)}disableVersionInfoTextToPreventDomClash(){document.querySelector("#deployVersion")&&(this.versionTextfield.enabled=!1)}removeDomVersionNumber(){}setDomVersionNumber(){const t=document.querySelector("#deployVersion");t&&(t.textContent=this.versionTextfield.element.text)}},"StartupLoader");k.EVENT_GAME_READY="startupLoaderGameReady",k.EVENT_START_FAILURE="startupLoaderFailure",k._uniqueRemoteJsId=null,__decorate10([attribute(1),__metadata7("design:type",String)],k.prototype,"projectName",void 0),__decorate10([attribute(2),__metadata7("design:type",Boolean)],k.prototype,"verbose",void 0),__decorate10([attribute(1024),__metadata7("design:type","function"==typeof(F="undefined"!=typeof pc&&pc.Entity)?F:Object)],k.prototype,"versionTextfield",void 0),__decorate10([attribute(16384),__metadata7("design:type","function"==typeof(V="undefined"!=typeof pc&&pc.Asset)?V:Object)],k.prototype,"versionInfo",void 0),k=N=__decorate10([component()],k);var G,__decorate11=function(t,e,i,n){var s,o=arguments.length,r=o<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,i,n);else for(var a=t.length-1;a>=0;a--)(s=t[a])&&(r=(o<3?s(r):o>3?s(e,i,r):s(e,i))||r);return o>3&&r&&Object.defineProperty(e,i,r),r},__metadata8=function(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)},W=__name(class RadialBar2 extends pc.ScriptType{constructor(){super(...arguments),this.progress=.25}initialize(){this.entity.element.material=this.entity.element.material.clone(),this.setProgress(this.progress)}setProgress(t){t=pc.math.clamp(t,0,1),this.progress=t,this.entity.element.material.alphaTest=1-(this.progress+.001)}},"RadialBar");__decorate11([attribute(1024),__metadata8("design:type","function"==typeof(G="undefined"!=typeof pc&&pc.Entity)?G:Object)],W.prototype,"radialFillEntity",void 0),__decorate11([attribute(4),range(0,1),__metadata8("design:type",Number)],W.prototype,"progress",void 0),W=__decorate11([component()],W);var __decorate12=function(t,e,i,n){var s,o=arguments.length,r=o<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,i,n);else for(var a=t.length-1;a>=0;a--)(s=t[a])&&(r=(o<3?s(r):o>3?s(e,i,r):s(e,i))||r);return o>3&&r&&Object.defineProperty(e,i,r),r},Q=__name(class HoleController2 extends pc.ScriptType{constructor(){super(...arguments),this.baseSpeed=2,this.dir=pc.Vec3.ZERO.clone()}initialize(){this.targetPos=this.entity.getPosition(),this.hole=this.entity.getScript(q),this.app.on(p.HoleChangedSize,this.onChangedSize,this),this.once(p.OnDestroy,(()=>{this.app.off(p.HoleChangedSize,this.onChangedSize,this)}),this)}postInitialize(){this.onChangedSize(at.instance.hole.getSize())}fixedUpdate(t){let e=this.targetPos.clone().add(this.dir.clone().mulScalar(this.speed*t));this.targetPos.copy(e)}reset(){this.dir=pc.Vec3.ZERO.clone(),this.targetPos=this.entity.getPosition()}setLookDirection(t){let e=Math.atan2(t.x,t.z);this.entity.setLocalEulerAngles(0,180*e/Math.PI-180,0)}onChangedSize(t){this.speed=this.baseSpeed*t}},"HoleController");__decorate12([attribute(4,2),function(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)}("design:type",Number)],Q.prototype,"baseSpeed",void 0),Q=__decorate12([component()],Q);var J,__decorate13=function(t,e,i,n){var s,o=arguments.length,r=o<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,i,n);else for(var a=t.length-1;a>=0;a--)(s=t[a])&&(r=(o<3?s(r):o>3?s(e,i,r):s(e,i))||r);return o>3&&r&&Object.defineProperty(e,i,r),r},__metadata10=function(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)},q=__name(class Hole2 extends pc.ScriptType{constructor(){super(...arguments),this.radialBarPrevTarget=0,this.points=0,this.level=1,this.size=.1,this.levelSizes=[.1,.2,.4,.6,.8,1,1.25,1.75,2,2,2.25,3.5,4]}initialize(){this.radialBar=this.radialBarEntity.getScript(W),this.radialBar.setProgress(0),this.app.on(p.HoleAteSomething,this.onAteSomething,this),window.hole=this}getLevel(){return this.level}setLevel(t){if(this.level==t)return;const e=this.level;this.level=t,this.app.fire(p.HoleChangedLevel,t,e),e<t&&wt.instance.sfxPlayer.playSizeUp(),this.setSize(this.level)}getSize(){return this.size}setSize(t){const e=this.calculateSize(t),i=this.size;this.size=e,this.app.fire(p.HoleChangedSize,e,i)}reset(){this.entity.getScript(Q).reset(),this.points=0,this.onAteSomething(0)}calculateSize(t){const e=Math.min(t-1,this.levelSizes.length-1);return this.levelSizes[e]}onAteSomething(t){var e;this.points+=t;let i=this.getPointThresholdForLevel(this.level),n=!1;for(;this.points>=i;)this.points-=i,this.setLevel(this.level+1),n=!0,i=this.getPointThresholdForLevel(this.level);i=this.getPointThresholdForLevel(this.level),console.log(`Level up progress: ${this.points}/${i}`),null===(e=this.radialBarTween)||void 0===e||e.stop();const s={t:this.radialBarPrevTarget},o={t:n?1:this.points/i},r=this.entity.tween(s).to(o,.25,pc.CubicOut).onUpdate((()=>{this.radialBar.setProgress(s.t)}));if(this.radialBarPrevTarget=o.t,this.radialBarTween=r,n){const t={t:0},e={t:this.points/i},n=this.entity.tween(t).to(e,.25,pc.CubicOut).onUpdate((()=>{this.radialBar.setProgress(t.t)}));this.radialBarPrevTarget=e.t,this.radialBarTween.chain(n)}this.radialBarTween.start()}getPointThresholdForLevel(t){return t-1<this.levelUpPointThresholds.length?this.levelUpPointThresholds[t-1]:this.levelUpPointThresholds[this.levelUpPointThresholds.length-1]+150*(t-this.levelUpPointThresholds.length)}},"Hole");__decorate13([attribute(268435460),__metadata10("design:type",Array)],q.prototype,"levelUpPointThresholds",void 0),__decorate13([attribute(1024),__metadata10("design:type","function"==typeof(J="undefined"!=typeof pc&&pc.Entity)?J:Object)],q.prototype,"radialBarEntity",void 0),q=__decorate13([component()],q);var $,Y,K,Z,X,tt,et,it,nt,st,ot,rt,__decorate14=function(t,e,i,n){var s,o=arguments.length,r=o<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,i,n);else for(var a=t.length-1;a>=0;a--)(s=t[a])&&(r=(o<3?s(r):o>3?s(e,i,r):s(e,i))||r);return o>3&&r&&Object.defineProperty(e,i,r),r},__metadata11=function(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)},__awaiter8=function(t,e,i,n){function adopt(t){return t instanceof i?t:new i((function(e){e(t)}))}return __name(adopt,"adopt"),new(i||(i=Promise))((function(i,s){function fulfilled(t){try{step(n.next(t))}catch(t){s(t)}}function rejected(t){try{step(n.throw(t))}catch(t){s(t)}}function step(t){t.done?i(t.value):adopt(t.value).then(fulfilled,rejected)}__name(fulfilled,"fulfilled"),__name(rejected,"rejected"),__name(step,"step"),step((n=n.apply(t,e||[])).next())}))};(rt=ot||(ot={}))[rt.CoreIdle=0]="CoreIdle",rt[rt.CoreStarting=1]="CoreStarting",rt[rt.CoreStarted=2]="CoreStarted",rt[rt.CoreBossStarting=3]="CoreBossStarting",rt[rt.CoreBossIdle=4]="CoreBossIdle",rt[rt.CoreBoss=5]="CoreBoss",rt[rt.CoreEnd=6]="CoreEnd";var at=$=__name(class GameManager2 extends pc.ScriptType{constructor(){super(...arguments),this._state=ot.CoreIdle,this.gameTimer=0,this.roundTime=1,this.paused=!1,this.currentLevelIndex=0,this.collectedPoints=0,this.collectedAmmo={},this.damageValues={},this.currentWeaponId=null,this.fireCooldown=0,this.levelAttempts=0,this.consumablesCount=0,this.hasWarnedOfTime=!1,this._bossHealth=100}get state(){return this._state}set state(t){this._state!==t&&(this._state=t,this.app.fire(p.GameStateChanged,t))}get bossHealth(){return this._bossHealth}set bossHealth(t){this._bossHealth!==t&&(this._bossHealth=t,this.app.fire(p.BossHealthChanged,t))}initialize(){$.instance=this,this.hole=this.holeEntity.getScript(q),this.bossController=this.bossControllerEntity.getScript(L),this.bossDamageVignetteEntity.enabled=!1,this.bossCameraDefaultPosition=this.bossCameraEntity.getPosition().clone(),this.bossCameraDefaultRotation=this.bossCameraEntity.getEulerAngles().clone(),this.inputManager=new S(this.app),this.app.systems.rigidbody.gravity=new pc.Vec3(0,-9.8*this.gravityMultiplier,0),this.app.on(p.OnPause,this.onPause,this),this.app.on(p.OnResume,this.onResume,this),this.app.on(p.HoleAteSomething,this.onHoleAteSomething,this),this.app.on(p.BossPhaseReadyToPlay,this.onBossPhaseReady,this),this.app.on(p.BossPhasePlayerDefeat,this.onPlayerDefeat,this),this.app.on(p.BossStartFiring,this.onStartFiring,this),this.app.on(p.BossEndFiring,this.onEndFiring,this),this.app.on(p.BossDefeatAnimationDone,this.onBossDefeat,this),this.restartButtonEntity.button.on("click",this.onRestartGame,this),this.entity.once(p.OnDestroy,(()=>{this.app.off(p.OnPause,this.onPause,this),this.app.off(p.OnResume,this.onResume,this),this.app.off(p.HoleAteSomething,this.onHoleAteSomething,this),this.app.off(p.BossPhaseReadyToPlay,this.onBossPhaseReady,this),this.app.off(p.BossPhasePlayerDefeat,this.onPlayerDefeat,this),this.app.off(p.BossStartFiring,this.onStartFiring,this),this.app.off(p.BossEndFiring,this.onEndFiring,this),this.app.off(p.BossDefeatAnimationDone,this.onBossDefeat,this),this.restartButtonEntity.button.off("click",this.onRestartGame,this)}),this)}postInitialize(){return __awaiter8(this,void 0,void 0,(function*(){this.bossStageEntity.enabled=!1,yield this.loadGame(),k.instance.isProd()&&ytgame.game.gameReady(),yield _.instance.splashScreen.show(),yield this.startNewRound()}))}update(t){if(!this.paused)if(this.state===ot.CoreStarted){if(this.gameTimer=Math.max(0,this.gameTimer-t),!k.instance.isProd()&&this.app.keyboard.isPressed(pc.KEY_Q)){const t=this.convertToWeaponTypeString(2);this.collectedAmmo[t]=1e5,this.damageValues[t]=10,this.gameTimer=1}this.app.fire(p.GameTimerTick,this.gameTimer,this.roundTime),this.gameTimer<=3&&!this.hasWarnedOfTime&&(wt.instance.sfxPlayer.playTick(),this.hasWarnedOfTime=!0),(this.gameTimer<=0||this.consumablesCount<=0)&&this.startBossStage()}else if(this.state===ot.CoreBoss&&null!==this.currentWeaponId)if(this.fireCooldown<=0){const t=this.convertToWeaponTypeString(this.currentWeaponId);this.collectedAmmo[t]>0&&(this.collectedAmmo[t]=Math.max(0,this.collectedAmmo[t]-1),this.bossHealth-=this.damageValues[t],this.app.fire(p.BossAmmoSpent,this.currentWeaponId,this.collectedAmmo[t]),this.bossHealth<=0?(this.state=ot.CoreEnd,this.app.fire(p.BossDefeated)):this.hasAmmo()||this.bossController.beginWalking(2)),this.fireCooldown=this.bossFireCooldown}else this.fireCooldown-=t}resetCoreState(){this.hole.setLevel(1),this.hole.reset(),wt.instance.musicPlayer.playIdleMusic(),this.state=ot.CoreStarting,this.roundTime=this.calculateRoundTime(),this.gameTimer=this.roundTime,this.hasWarnedOfTime=!1,this.app.fire(p.GameTimerTick,this.gameTimer,this.roundTime),this.collectedAmmo={},this.damageValues={},this.collectedPoints=0}resetCurrentLevel(){return __awaiter8(this,void 0,void 0,(function*(){this.inputManager.enabled=!1,this.resetCoreState(),this.hole.entity.setPosition(0,0,0),this.hole.reset(),wt.instance.levelLoader.unloadLevel();const t=yield wt.instance.levelLoader.loadLevel(this.currentLevelIndex);yield y.forSeconds(2),yield _.instance.loadingScreen.hideLoadingScreen(),this.consumablesCount=t.consumablesCount,this._bossHealth=Math.floor(.475*t.totalDamage),this.app.fire(p.CoreStarted,this.collectedPoints,this.gameTimer,this.startCountdownSec),yield y.forSeconds(this.startCountdownSec),this.state=ot.CoreStarted,this.inputManager.enabled=!0}))}startNewRound(){return __awaiter8(this,void 0,void 0,(function*(){yield y.forSeconds(1),this.resetCoreState(),this.levelAttempts=0,this.inputManager.enabled=!1;const t=yield wt.instance.levelLoader.loadLevel(this.currentLevelIndex);yield y.forSeconds(2),yield _.instance.loadingScreen.hideLoadingScreen(),this.consumablesCount=t.consumablesCount,this._bossHealth=Math.floor(.475*t.totalDamage),this.app.fire(p.CoreStarted,this.collectedPoints,this.gameTimer,this.startCountdownSec),yield y.forSeconds(this.startCountdownSec),this.state=ot.CoreStarted,this.inputManager.enabled=!0}))}startBossStage(){return __awaiter8(this,void 0,void 0,(function*(){this.inputManager.enabled=!1,this.state=ot.CoreBossStarting,yield _.instance.loadingScreen.showLoadingScreen(),yield y.forSeconds(1),wt.instance.musicPlayer.playBossMusic(),this.app.fire(p.BossHealthChanged,this._bossHealth),console.log("Boss health: ",this._bossHealth),this.bossStageEntity.enabled=!0,this.coreCameraEntity.camera.enabled=!1,this.bossCameraEntity.camera.enabled=!0;const t=[];for(const e in this.collectedAmmo)t.push(e);const e={activeWeaponIds:t,collectedAmmo:Object.assign({},this.collectedAmmo),bossMaxHealth:this._bossHealth};this.app.fire(p.BossPhaseStarted,e)}))}calculateRoundTime(){return Math.floor(this.baseRoundTimeSec+.2*this.baseRoundTimeSec*this.levelAttempts)}playCameraDefeatAnimation(){return __awaiter8(this,void 0,void 0,(function*(){return new Promise((t=>{const e={t:0},i=this.bossCameraEntity.getPosition().clone(),n=this.bossCameraEntity.getRotation().clone(),s=this.entity.tween(e);s.to({t:1},1,pc.BounceOut),s.onUpdate((()=>{const t=i.clone().lerp(i,this.bossCameraDefeatPositionEntity.getPosition(),e.t);this.bossCameraEntity.setPosition(t);const s=n.clone().slerp(n,this.bossCameraDefeatPositionEntity.getRotation(),e.t);this.bossCameraEntity.setRotation(s)})),s.onComplete(t),s.start()}))}))}hasAmmo(){for(const t in this.collectedAmmo)if(this.collectedAmmo[t]>0)return!0;return!1}convertToWeaponTypeString(t){return t.toString()}loadGame(){return __awaiter8(this,void 0,void 0,(function*(){const t=yield this.retrieveState();t&&(this.currentLevelIndex=t.currentLevel)}))}saveGame(){return __awaiter8(this,void 0,void 0,(function*(){const t={currentLevel:this.currentLevelIndex};yield this.storeState(t),console.log("GAME SAVED")}))}retrieveState(){return __awaiter8(this,void 0,void 0,(function*(){if(k.instance.isProd()){const t=yield ytgame.game.loadData();if(t)return JSON.parse(t)}else{const t=window.localStorage.getItem("SAVE_DATA");if(t)return JSON.parse(t)}return null}))}storeState(t){return __awaiter8(this,void 0,void 0,(function*(){const e=JSON.stringify(t);k.instance.isProd()?yield ytgame.game.saveData(e):window.localStorage.setItem("SAVE_DATA",e)}))}onPause(){this.paused=!0}onResume(){this.paused=!1}onHoleAteSomething(t,e,i){this.collectedPoints+=t,this.consumablesCount--;const n=this.convertToWeaponTypeString(i);this.collectedAmmo.hasOwnProperty(n)?this.collectedAmmo[n]+=1:this.collectedAmmo[n]=1,this.damageValues.hasOwnProperty(n)||(this.damageValues[n]=e),this.app.fire(p.PointsGained,this.collectedPoints)}onBossPhaseReady(){this.state=ot.CoreBossIdle,this.hasAmmo()||(this.state=ot.CoreBoss,this.bossController.beginWalking(2))}onPlayerDefeat(){return __awaiter8(this,void 0,void 0,(function*(){this.bossDamageVignetteEntity.enabled=!0,this.bossDamageVignetteEntity.element.opacity=1,this.bossDamageVignetteEntity.tween(this.bossDamageVignetteEntity.element).to({opacity:.66},.5,pc.SineInOut).start(),this.state=ot.CoreEnd,yield this.playCameraDefeatAnimation(),yield y.forSeconds(1),yield _.instance.loadingScreen.showLoadingScreen(),this.bossDamageVignetteEntity.enabled=!1,this.bossCameraEntity.camera.enabled=!1,this.coreCameraEntity.camera.enabled=!0,this.bossStageEntity.enabled=!0,this.bossCameraEntity.setPosition(this.bossCameraDefaultPosition.clone()),this.bossCameraEntity.setEulerAngles(this.bossCameraDefaultRotation.clone()),this.bossController.reset(),this.levelAttempts++,this.resetCurrentLevel()}))}onStartFiring(t){this.state==ot.CoreBossIdle&&(this.state=ot.CoreBoss,this.bossController.beginWalking()),this.currentWeaponId=t}onEndFiring(t){this.currentWeaponId=null,this.fireCooldown=0}onBossDefeat(){return __awaiter8(this,void 0,void 0,(function*(){if(yield y.forSeconds(1),this.currentLevelIndex++,11!=this.currentLevelIndex&&13!=this.currentLevelIndex||this.currentLevelIndex++,this.currentLevelIndex>=wt.instance.levelDataProvider.getLevelCount())return this.currentLevelIndex=0,yield this.saveGame(),void(this.endScreenEntity.enabled=!0);yield this.saveGame(),yield this.onAboutToStartNewRound()}))}onRestartGame(){this.endScreenEntity.enabled=!1,this.onAboutToStartNewRound()}onAboutToStartNewRound(){return __awaiter8(this,void 0,void 0,(function*(){yield _.instance.loadingScreen.showLoadingScreen(),this.hole.entity.setPosition(0,0,0),this.hole.reset(),this.bossDamageVignetteEntity.enabled=!1,this.bossCameraEntity.camera.enabled=!1,this.coreCameraEntity.camera.enabled=!0,this.bossStageEntity.enabled=!0,this.bossCameraEntity.setPosition(this.bossCameraDefaultPosition.clone()),this.bossCameraEntity.setEulerAngles(this.bossCameraDefaultRotation.clone()),this.bossController.reset(),this.levelAttempts=0,this.startNewRound()}))}},"GameManager");__decorate14([attribute(1024),__metadata11("design:type","function"==typeof(Y="undefined"!=typeof pc&&pc.Entity)?Y:Object)],at.prototype,"holeEntity",void 0),__decorate14([attribute(4,30),__metadata11("design:type",Number)],at.prototype,"baseRoundTimeSec",void 0),__decorate14([attribute(4,5),__metadata11("design:type",Number)],at.prototype,"startCountdownSec",void 0),__decorate14([attribute(4,10),__metadata11("design:type",Number)],at.prototype,"gravityMultiplier",void 0),__decorate14([attribute(1024),__metadata11("design:type","function"==typeof(K="undefined"!=typeof pc&&pc.Entity)?K:Object)],at.prototype,"coreCameraEntity",void 0),__decorate14([attribute(1024),__metadata11("design:type","function"==typeof(Z="undefined"!=typeof pc&&pc.Entity)?Z:Object)],at.prototype,"bossStageEntity",void 0),__decorate14([attribute(1024),__metadata11("design:type","function"==typeof(X="undefined"!=typeof pc&&pc.Entity)?X:Object)],at.prototype,"bossControllerEntity",void 0),__decorate14([attribute(1024),__metadata11("design:type","function"==typeof(tt="undefined"!=typeof pc&&pc.Entity)?tt:Object)],at.prototype,"bossCameraEntity",void 0),__decorate14([attribute(1024),__metadata11("design:type","function"==typeof(et="undefined"!=typeof pc&&pc.Entity)?et:Object)],at.prototype,"bossCameraDefeatPositionEntity",void 0),__decorate14([attribute(1024),__metadata11("design:type","function"==typeof(it="undefined"!=typeof pc&&pc.Entity)?it:Object)],at.prototype,"bossDamageVignetteEntity",void 0),__decorate14([attribute(4,.1),__metadata11("design:type",Number)],at.prototype,"bossFireCooldown",void 0),__decorate14([attribute(1024),__metadata11("design:type","function"==typeof(nt="undefined"!=typeof pc&&pc.Entity)?nt:Object)],at.prototype,"endScreenEntity",void 0),__decorate14([attribute(1024),__metadata11("design:type","function"==typeof(st="undefined"!=typeof pc&&pc.Entity)?st:Object)],at.prototype,"restartButtonEntity",void 0),at=$=__decorate14([component()],at);var ct,lt,__decorate15=function(t,e,i,n){var s,o=arguments.length,r=o<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,i,n);else for(var a=t.length-1;a>=0;a--)(s=t[a])&&(r=(o<3?s(r):o>3?s(e,i,r):s(e,i))||r);return o>3&&r&&Object.defineProperty(e,i,r),r},__metadata12=function(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)},pt=__name(class Consumable2 extends pc.ScriptType{constructor(){super(...arguments),this.isBeingEaten=!1,this.consumed=!1,this.fakeFallingVelocity=0,this.velocityTreshold=.1}postInitialize(){var t;this.propScript=null===(t=this.prop)||void 0===t?void 0:t.getScript(m),this.propScript?(this.entity.on(p.OnDestroy,this.onDestroy,this),this.setup()):console.log(`Consumable ${this.entity.name} is missing a prop`)}setup(){this.propScript.init(this),this.setDefaultCollision(),b.instance.registerConsumable(this)}setPosition(t){this.entity.setPosition(t)}setRotation(t,e,i){this.entity.setEulerAngles(t,e,i)}onDestroy(){b.instance.unregisterConsumable(this)}update(t){this.fakeGravityConsumption?this.doFakeGravityFall(t):!this.consumed&&this.propScript.entity.collision.getShapePosition().y<-.1&&this.beginConsumption(at.instance.hole)}getPropScript(){return this.propScript}getPropPosition(){return this.prop.getPosition()}markForConsumption(t){this.setConsuming(!0),this.consumer=t}cancelConsumption(t){this.consumer&&this.consumer!==t||this.setConsuming(!1)}setConsuming(t){this.isBeingEaten=t,t?this.setPipeCollision():(this.consumer=void 0,this.setDefaultCollision())}beginConsumption(t){return function(t,e,i,n){function adopt(t){return t instanceof i?t:new i((function(e){e(t)}))}return __name(adopt,"adopt"),new(i||(i=Promise))((function(i,s){function fulfilled(t){try{step(n.next(t))}catch(t){s(t)}}function rejected(t){try{step(n.throw(t))}catch(t){s(t)}}function step(t){t.done?i(t.value):adopt(t.value).then(fulfilled,rejected)}__name(fulfilled,"fulfilled"),__name(rejected,"rejected"),__name(step,"step"),step((n=n.apply(t,e||[])).next())}))}(this,void 0,void 0,(function*(){this.consumed=!0,this.fakeGravityConsumption=!0,this.fakeFallingVelocity=-6,this.app.fire(p.HoleAteSomething,this.pointValue,this.damageValue,this.weaponType),wt.instance.sfxPlayer.playCollect(),b.instance.unregisterConsumable(this),yield y.forMilis(1e3),this.consume()}))}consume(){this.prop&&(this.fakeGravityConsumption=!1,this.setConsuming(!1),this.entity.enabled=!1)}setPipeCollision(){this.isBeingEaten=!0}setDefaultCollision(){this.isBeingEaten=!1}doFakeGravityFall(t){this.prop.translate(0,this.fakeFallingVelocity*t,0)}setPhysics(t,e=!1){}},"Consumable");__decorate15([attribute(4),enumType(l),__metadata12("design:type","function"==typeof(ct=void 0!==l&&l)?ct:Object)],pt.prototype,"weaponType",void 0),__decorate15([attribute(4,1),__metadata12("design:type",Number)],pt.prototype,"levelRequired",void 0),__decorate15([attribute(4,1),__metadata12("design:type",Number)],pt.prototype,"pointValue",void 0),__decorate15([attribute(4,1),__metadata12("design:type",Number)],pt.prototype,"damageValue",void 0),__decorate15([attribute(1024),__metadata12("design:type","function"==typeof(lt="undefined"!=typeof pc&&pc.Entity)?lt:Object)],pt.prototype,"prop",void 0),__decorate15([attribute(4),__metadata12("design:type",Number)],pt.prototype,"radius",void 0),pt=__decorate15([component()],pt);var ht,__decorate16=function(t,e,i,n){var s,o=arguments.length,r=o<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,i,n);else for(var a=t.length-1;a>=0;a--)(s=t[a])&&(r=(o<3?s(r):o>3?s(e,i,r):s(e,i))||r);return o>3&&r&&Object.defineProperty(e,i,r),r},__metadata13=function(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)},ut=ht=__name(class LevelLoader2 extends pc.ScriptType{constructor(){super(...arguments),this.propInstances=[]}loadLevel(t){var e;return function(t,e,i,n){function adopt(t){return t instanceof i?t:new i((function(e){e(t)}))}return __name(adopt,"adopt"),new(i||(i=Promise))((function(i,s){function fulfilled(t){try{step(n.next(t))}catch(t){s(t)}}function rejected(t){try{step(n.throw(t))}catch(t){s(t)}}function step(t){t.done?i(t.value):adopt(t.value).then(fulfilled,rejected)}__name(fulfilled,"fulfilled"),__name(rejected,"rejected"),__name(step,"step"),step((n=n.apply(t,e||[])).next())}))}(this,void 0,void 0,(function*(){const i=new Map;let n=0,s=0;console.log(ht.name,"loadLevel:",t),this.unloadLevel();const o=yield wt.instance.levelDataProvider.getLevel(t);for(let t=0;t<o.props.length;t++){const r=o.props[t],a=this.propTemplates[r.type];let c=null!==(e=i.get(r.type))&&void 0!==e?e:0;if(i.set(r.type,++c),!a){console.warn("Prop type not found:",l[r.type],`(${r.type})`);continue}a.loaded||(this.app.assets.load(a),yield y.until((()=>a.loaded)));const p=a.resource.instantiate();p.setPosition(r.pos[0]*this.levelScale,0,-r.pos[2]*this.levelScale),this.app.root.addChild(p),this.propInstances.push(p);n+=p.getScript(pt).damageValue,s++}return i.forEach(((t,e)=>{console.log(l[e],t)})),this.app.fire(p.LevelLoaded,t+1),{totalDamage:n,consumablesCount:s}}))}unloadLevel(){for(let t=this.propInstances.length-1;t>=0;t--){const e=this.propInstances[t];e&&e.destroy()}this.propInstances.length=0,this.app.fire(p.LevelUnloaded)}},"LevelLoader");__decorate16([attribute(268437504),__metadata13("design:type",Array)],ut.prototype,"propTemplates",void 0),__decorate16([attribute(4,1),__metadata13("design:type",Number)],ut.prototype,"levelScale",void 0),ut=ht=__decorate16([component()],ut);var __decorate17=function(t,e,i,n){var s,o=arguments.length,r=o<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,i,n);else for(var a=t.length-1;a>=0;a--)(s=t[a])&&(r=(o<3?s(r):o>3?s(e,i,r):s(e,i))||r);return o>3&&r&&Object.defineProperty(e,i,r),r},dt=__name(class LevelDataProvider2 extends pc.ScriptType{getLevel(t){return function(t,e,i,n){function adopt(t){return t instanceof i?t:new i((function(e){e(t)}))}return __name(adopt,"adopt"),new(i||(i=Promise))((function(i,s){function fulfilled(t){try{step(n.next(t))}catch(t){s(t)}}function rejected(t){try{step(n.throw(t))}catch(t){s(t)}}function step(t){t.done?i(t.value):adopt(t.value).then(fulfilled,rejected)}__name(fulfilled,"fulfilled"),__name(rejected,"rejected"),__name(step,"step"),step((n=n.apply(t,e||[])).next())}))}(this,void 0,void 0,(function*(){if(t>=0&&t<this.levelDataAssets.length){const e=this.levelDataAssets[t];return e.loaded||(this.app.assets.load(this.levelDataAssets[t]),yield y.until((()=>e.loaded))),Object.assign({},this.levelDataAssets[t].resource)}throw new Error(`Index out of range ${t}`)}))}getLevelCount(){return this.levelDataAssets.length}},"LevelDataProvider");__decorate17([attribute(268451840),function(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)}("design:type",Array)],dt.prototype,"levelDataAssets",void 0),dt=__decorate17([component()],dt);var __decorate18=function(t,e,i,n){var s,o=arguments.length,r=o<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,i,n);else for(var a=t.length-1;a>=0;a--)(s=t[a])&&(r=(o<3?s(r):o>3?s(e,i,r):s(e,i))||r);return o>3&&r&&Object.defineProperty(e,i,r),r},__metadata15=function(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)},__awaiter12=function(t,e,i,n){function adopt(t){return t instanceof i?t:new i((function(e){e(t)}))}return __name(adopt,"adopt"),new(i||(i=Promise))((function(i,s){function fulfilled(t){try{step(n.next(t))}catch(t){s(t)}}function rejected(t){try{step(n.throw(t))}catch(t){s(t)}}function step(t){t.done?i(t.value):adopt(t.value).then(fulfilled,rejected)}__name(fulfilled,"fulfilled"),__name(rejected,"rejected"),__name(step,"step"),step((n=n.apply(t,e||[])).next())}))},ft=__name(class MusicPlayer2 extends pc.ScriptType{constructor(){super(...arguments),this.currentlyPlayingSlotName=null,this.currentTween=null}initialize(){this.app.on(p.OnAudioContextResume,this.onAudioContextResume,this),this.app.once(p.OnDestroy,(()=>{this.app.off(p.OnAudioContextResume,this.onAudioContextResume,this)}),this),this.entity.sound.volume=0,this.playIdleMusic()}playIdleMusic(){this.play(this.idleSlotName)}playBossMusic(){this.play(this.bossSlotName)}play(t){return __awaiter12(this,void 0,void 0,(function*(){this.currentlyPlayingSlotName&&(yield this.fadeMusic(0),this.entity.sound.stop(this.currentlyPlayingSlotName)),this.entity.sound.play(t),this.currentlyPlayingSlotName=t,yield this.fadeMusic(this.volume)}))}fadeMusic(t){return __awaiter12(this,void 0,void 0,(function*(){return new Promise((e=>{this.currentTween&&this.currentTween.stop();const i=this.entity.sound.volume,n={t:0},s=this.entity.tween(n);s.to({t:1},2,pc.Linear),s.onUpdate((()=>{const e=pc.math.lerp(i,t,n.t);this.entity.sound.volume=e})),s.onComplete((()=>{this.currentTween=null,e()})),this.currentTween=s,this.currentTween.start()}))}))}onAudioContextResume(){}},"MusicPlayer");__decorate18([attribute(1),__metadata15("design:type",String)],ft.prototype,"idleSlotName",void 0),__decorate18([attribute(1),__metadata15("design:type",String)],ft.prototype,"bossSlotName",void 0),__decorate18([attribute(4,.5),range(0,1),__metadata15("design:type",Number)],ft.prototype,"volume",void 0),ft=__decorate18([component()],ft);var __decorate19=function(t,e,i,n){var s,o=arguments.length,r=o<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,i,n);else for(var a=t.length-1;a>=0;a--)(s=t[a])&&(r=(o<3?s(r):o>3?s(e,i,r):s(e,i))||r);return o>3&&r&&Object.defineProperty(e,i,r),r},__metadata16=function(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)},yt=__name(class SfxPlayer2 extends pc.ScriptType{playCollect(){this.getSlot(this.collectName,.8,1.2).play()}playSizeUp(){this.getSlot(this.sizeUpName).play()}playTick(){this.getSlot(this.tickName).play()}playShot(){this.getSlot(this.shotName,.4,1.6).play()}playThrow(){this.getSlot(this.throwName,.4,1.6).play()}getSlot(t,e=1,i=1){const n=this.entity.sound.slot(t);return n.pitch=pc.math.random(e,i),n}},"SfxPlayer");__decorate19([attribute(1),__metadata16("design:type",String)],yt.prototype,"collectName",void 0),__decorate19([attribute(1),__metadata16("design:type",String)],yt.prototype,"sizeUpName",void 0),__decorate19([attribute(1),__metadata16("design:type",String)],yt.prototype,"tickName",void 0),__decorate19([attribute(1),__metadata16("design:type",String)],yt.prototype,"shotName",void 0),__decorate19([attribute(1),__metadata16("design:type",String)],yt.prototype,"throwName",void 0),yt=__decorate19([component()],yt);var mt,gt,bt,vt,St,Pt,__decorate20=function(t,e,i,n){var s,o=arguments.length,r=o<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,i,n);else for(var a=t.length-1;a>=0;a--)(s=t[a])&&(r=(o<3?s(r):o>3?s(e,i,r):s(e,i))||r);return o>3&&r&&Object.defineProperty(e,i,r),r},__metadata17=function(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)},wt=mt=__name(class Toolbox2 extends pc.ScriptType{initialize(){this.sceneChanger=this.sceneChangerEntity.getScript(f),this.levelLoader=this.levelLoaderEntity.getScript(ut),this.levelDataProvider=this.levelDataProviderEntity.getScript(dt),this.musicPlayer=this.musicPlayerEntity.getScript(ft),this.sfxPlayer=this.sfxPlayerEntity.getScript(yt),mt.instance=this,window.toolbox=this}},"Toolbox");__decorate20([attribute(1024),__metadata17("design:type","function"==typeof(gt="undefined"!=typeof pc&&pc.Entity)?gt:Object)],wt.prototype,"sceneChangerEntity",void 0),__decorate20([attribute(1024),__metadata17("design:type","function"==typeof(bt="undefined"!=typeof pc&&pc.Entity)?bt:Object)],wt.prototype,"levelLoaderEntity",void 0),__decorate20([attribute(1024),__metadata17("design:type","function"==typeof(vt="undefined"!=typeof pc&&pc.Entity)?vt:Object)],wt.prototype,"levelDataProviderEntity",void 0),__decorate20([attribute(1024),__metadata17("design:type","function"==typeof(St="undefined"!=typeof pc&&pc.Entity)?St:Object)],wt.prototype,"musicPlayerEntity",void 0),__decorate20([attribute(1024),__metadata17("design:type","function"==typeof(Pt="undefined"!=typeof pc&&pc.Entity)?Pt:Object)],wt.prototype,"sfxPlayerEntity",void 0),wt=mt=__decorate20([component()],wt);var Ct,Et,Rt,__decorate21=function(t,e,i,n){var s,o=arguments.length,r=o<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,i,n);else for(var a=t.length-1;a>=0;a--)(s=t[a])&&(r=(o<3?s(r):o>3?s(e,i,r):s(e,i))||r);return o>3&&r&&Object.defineProperty(e,i,r),r},__metadata18=function(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)},Ot=__name(class BossBulletController2 extends pc.ScriptType{constructor(){super(...arguments),this.curves=[],this.bullets={},this.activeBullets=[]}initialize(){for(let t=0;t<this.initialCurvePoolSize;t++)this.createCurve();this.app.on(p.BossAmmoSpent,this.onAmmoSpent,this),this.entity.on(p.OnDestroy,(()=>{this.app.off(p.BossAmmoSpent,this.onAmmoSpent,this)}),this)}update(t){for(let e=0;e<this.activeBullets.length;e++){const i=this.activeBullets[e];i.elapsedTime+=t;const n=i.elapsedTime/i.duration;if(n>=1){i.bulletEntity.enabled=!1,this.bullets[i.bulletId].push(i.bulletEntity),this.curves.push(i.curve),this.activeBullets.splice(e--,1);continue}this.adjustCurve(i.curve);const s=i.curve.getPoint(n),o=i.curve.getDirection(n);i.bulletEntity.setPosition(s),i.bulletEntity.lookAt(s.clone().add(o.mulScalar(10)))}}fireBullet(t){const e=this.getCurve();this.setupCurve(e);const i=this.getBullet(t);i.enabled=!0;const n={curve:e,bulletId:t.toString(),bulletEntity:i,elapsedTime:0,duration:1};this.activeBullets.push(n),this.isShot(t)?wt.instance.sfxPlayer.playShot():wt.instance.sfxPlayer.playThrow()}getCurve(){this.curves.length<=0&&this.createCurve();const t=Math.floor(Math.random()*this.curves.length),e=this.curves[t];return this.curves.splice(t,1),e}createCurve(){const t=this.curveTemplate.resource.instantiate(),e=t.getScript(a);this.curves.push(e),this.entity.addChild(t)}setupCurve(t){this.adjustCurve(t);const e=pc.math.random(0,360)*pc.math.DEG_TO_RAD,i=pc.math.random(0,this.curveRadius),n=this.bossHoleEntity.getPosition().clone();n.x+=Math.cos(e)*i,n.y=this.bossTargetEntity.getPosition().y+Math.sin(e)*i,t.startControl=n.clone(),t.endControl=n.clone()}adjustCurve(t){t.startPosition=this.bossHoleEntity.getPosition().clone(),t.startPosition.y-=2,t.endPosition=this.bossTargetEntity.getPosition().clone()}isShot(t){for(const e of this.bulletTemplateMap)if(e.type===t)return e.isShot;return!1}findBulletTemplate(t){for(const e of this.bulletTemplateMap)if(e.type===t)return e.bulletTemplate.resource;throw new Error(`Unable to find bullet template for type '${t}'`)}getBullet(t){const e=t.toString();return this.bullets.hasOwnProperty(e)&&this.bullets[e].length>0?this.bullets[e].shift():this.createBullet(t)}createBullet(t){const e=this.findBulletTemplate(t).instantiate(),i=t.toString();return this.bullets.hasOwnProperty(i)||(this.bullets[i]=[]),this.bullets[i].push(e),this.entity.addChild(e),e.enabled=!1,e}onAmmoSpent(t,e){this.fireBullet(t)}},"BossBulletController");__decorate21([attribute(1024),__metadata18("design:type","function"==typeof(Ct="undefined"!=typeof pc&&pc.Entity)?Ct:Object)],Ot.prototype,"bossTargetEntity",void 0),__decorate21([attribute(1024),__metadata18("design:type","function"==typeof(Et="undefined"!=typeof pc&&pc.Entity)?Et:Object)],Ot.prototype,"bossHoleEntity",void 0),__decorate21([attribute(32768),__metadata18("design:type","function"==typeof(Rt="undefined"!=typeof pc&&pc.Asset)?Rt:Object)],Ot.prototype,"curveTemplate",void 0),__decorate21([attribute(4,10),__metadata18("design:type",Number)],Ot.prototype,"initialCurvePoolSize",void 0),__decorate21([attribute(268435464),schemaJsonEnum("type",l,4),schemaJson("bulletTemplate",2048),schemaJson("isShot",2),__metadata18("design:type",Array)],Ot.prototype,"bulletTemplateMap",void 0),__decorate21([attribute(4,2),__metadata18("design:type",Number)],Ot.prototype,"curveRadius",void 0),Ot=__decorate21([component()],Ot);var Tt,__decorate22=function(t,e,i,n){var s,o=arguments.length,r=o<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,i,n);else for(var a=t.length-1;a>=0;a--)(s=t[a])&&(r=(o<3?s(r):o>3?s(e,i,r):s(e,i))||r);return o>3&&r&&Object.defineProperty(e,i,r),r},jt=__name(class UIBossHealth2 extends pc.ScriptType{initialize(){this.setHealth(1),this.enabled=!1}show(t){var e;null===(e=this.tween)||void 0===e||e.stop(),t?(this.enabled=!0,this.tween=this.entity.tween(this.entity.getLocalScale()).to({x:1,y:1,z:1},.5,pc.BackOut).start()):this.tween=this.entity.tween(this.entity.getLocalScale()).to({x:0,y:0,z:0},.5,pc.BackIn).onComplete((()=>this.enabled=!1)).start()}setHealth(t){this.fill.setLocalScale(t,1,1)}},"UIBossHealth");__decorate22([attribute(1024),function(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)}("design:type","function"==typeof(Tt="undefined"!=typeof pc&&pc.Entity)?Tt:Object)],jt.prototype,"fill",void 0),jt=__decorate22([component()],jt);var It,Bt,__decorate23=function(t,e,i,n){var s,o=arguments.length,r=o<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,i,n);else for(var a=t.length-1;a>=0;a--)(s=t[a])&&(r=(o<3?s(r):o>3?s(e,i,r):s(e,i))||r);return o>3&&r&&Object.defineProperty(e,i,r),r},__metadata20=function(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)},_t=__name(class UIBoss2 extends pc.ScriptType{constructor(){super(...arguments),this.bossMaxHealth=1}initialize(){this.bossHealth=this.bossHealthEntity.getScript(jt),this.app.on(p.GameStateChanged,this.onGameStateChanged,this),this.app.on(p.BossHealthChanged,this.onBossHealthChanged,this),this.app.on(p.BossPhaseReadyToPlay,this.onCoreBoss,this),this.app.on(p.OnDestroy,(()=>{this.app.off(p.GameStateChanged,this.onGameStateChanged,this),this.app.off(p.BossHealthChanged,this.onBossHealthChanged,this),this.app.off(p.BossPhaseReadyToPlay,this.onCoreBoss,this)}),this),this.bossHealth.show(!1),this.bossFightTitle.enabled=!1,this.bossFightTitle.setLocalScale(0,0,0)}setBossMaxHealth(t){this.bossMaxHealth=Math.max(1,t),this.onBossHealthChanged(this.bossMaxHealth)}onGameStateChanged(t){t===ot.CoreEnd&&this.onCoreEnd()}onCoreBoss(t){var e;this.bossFightTitle.enabled=!0,null===(e=this.bossFightTitleTween)||void 0===e||e.stop(),this.bossFightTitleTween=this.bossFightTitle.tween(this.bossFightTitle.getLocalScale()).to({x:1,y:1,z:1},.5,pc.BackOut).start(),this.setBossMaxHealth(t),this.bossHealth.show(!0)}onCoreEnd(){var t;null===(t=this.bossFightTitleTween)||void 0===t||t.stop(),this.bossFightTitleTween=this.bossFightTitle.tween(this.bossFightTitle.getLocalScale()).to({x:0,y:0,z:0},.5,pc.BackIn).onComplete((()=>this.bossFightTitle.enabled=!1)).start(),this.bossHealth.show(!1)}onBossHealthChanged(t){this.bossHealth.setHealth(t/this.bossMaxHealth)}},"UIBoss");__decorate23([attribute(1024),__metadata20("design:type","function"==typeof(It="undefined"!=typeof pc&&pc.Entity)?It:Object)],_t.prototype,"bossHealthEntity",void 0),__decorate23([attribute(1024),__metadata20("design:type","function"==typeof(Bt="undefined"!=typeof pc&&pc.Entity)?Bt:Object)],_t.prototype,"bossFightTitle",void 0),_t=__decorate23([component()],_t);var __decorate24=function(t,e,i,n){var s,o=arguments.length,r=o<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,i,n);else for(var a=t.length-1;a>=0;a--)(s=t[a])&&(r=(o<3?s(r):o>3?s(e,i,r):s(e,i))||r);return o>3&&r&&Object.defineProperty(e,i,r),r},Dt=__name(class UIButtonBehaviour2 extends pc.ScriptType{constructor(){super(...arguments),this.pressedScaleVec=new pc.Vec3(.9,.9,.9),this.inDuration=.12,this.outDuration=.32,this.active=!0}initialize(){this.element=this.entity.element,this.app.touch?(this.element.on("touchstart",this.onPress,this),this.element.on("touchend",this.onRelease,this),this.element.on("touchcancel",this.onRelease,this),this.element.on("touchleave",this.onRelease,this)):(this.element.on("mousedown",this.onPress,this),this.element.on("mouseup",this.onRelease,this)),this.element.on("click",this.onClick,this),this.initialScaleVec=this.entity.getLocalScale().clone(),this.pressedScaleVec=this.initialScaleVec.clone().mulScalar(this.pressedScale)}setActive(t){this.active=t,this.entity.button&&(this.entity.button.active=t)}onPress(){return this.active?(this.entity.setLocalScale(this.initialScaleVec),this.pressTween=this.entity.tween(this.entity.getLocalScale()).to(this.pressedScaleVec,this.inDuration,pc.ExponentialOut).start(),this.pressTween):null}onClick(){}onRelease(){return this.active&&this.entity.getLocalScale()!==pc.Vec3.ONE?(this.releaseTween=this.entity.tween(this.entity.getLocalScale()).to(this.initialScaleVec,this.outDuration,pc.ElasticOut).start(),this.releaseTween):null}},"UIButtonBehaviour");__decorate24([attribute(4,.9,null,"Scale"),function(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)}("design:type",Number)],Dt.prototype,"pressedScale",void 0),Dt=__decorate24([component()],Dt);var xt,At,Mt,Lt,zt,__decorate25=function(t,e,i,n){var s,o=arguments.length,r=o<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,i,n);else for(var a=t.length-1;a>=0;a--)(s=t[a])&&(r=(o<3?s(r):o>3?s(e,i,r):s(e,i))||r);return o>3&&r&&Object.defineProperty(e,i,r),r},__metadata22=function(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)},Nt=xt=__name(class UIBossWeaponButton2 extends pc.ScriptType{constructor(){super(...arguments),this.count=0,this.isEnabled=!0,this.isDown=!1}initialize(){this.buttonBehaviour=this.entity.getScript(Dt),this.entity.button.on("mousedown",this.onDown,this),this.entity.button.on("mouseup",this.onUp,this),this.entity.button.on("touchstart",this.onDown,this),this.entity.button.on("touchend",this.onUp,this),this.app.on(p.BossAmmoSpent,this.onAmmoSpent,this),this.entity.once(p.OnDestroy,(()=>{this.app.off(p.BossAmmoSpent,this.onAmmoSpent,this)}),this)}getWeaponId(){return this.weaponId}getIsEnabled(){return this.isEnabled}setIsEnabled(t){this.isEnabled=t,this.entity.element.color=t?pc.Color.WHITE:this.disabledTint,this.iconEntity.element.color=t?pc.Color.WHITE:this.disabledTint,this.buttonBehaviour.setActive(t),!t&&this.isDown&&this.onUp()}setCount(t){this.count=t,this.textEntity.element.text=Math.max(0,Math.floor(t)).toString()}getCount(){return this.count}onDown(){this.isEnabled&&(this.isDown=!0,this.fire(xt.EVENT_DOWN,this.weaponId))}onUp(){this.isDown=!1,this.fire(xt.EVENT_UP,this.weaponId)}onAmmoSpent(t,e){this.weaponId===t&&(this.setCount(e),0===e&&this.setIsEnabled(!1))}},"UIBossWeaponButton");Nt.EVENT_DOWN="down",Nt.EVENT_UP="up",__decorate25([attribute(4),enumType(l),__metadata22("design:type","function"==typeof(At=void 0!==l&&l)?At:Object)],Nt.prototype,"weaponId",void 0),__decorate25([attribute(32),__metadata22("design:type","function"==typeof(Mt="undefined"!=typeof pc&&pc.Color)?Mt:Object)],Nt.prototype,"disabledTint",void 0),__decorate25([attribute(1024),__metadata22("design:type","function"==typeof(Lt="undefined"!=typeof pc&&pc.Entity)?Lt:Object)],Nt.prototype,"iconEntity",void 0),__decorate25([attribute(1024),__metadata22("design:type","function"==typeof(zt="undefined"!=typeof pc&&pc.Entity)?zt:Object)],Nt.prototype,"textEntity",void 0),Nt=xt=__decorate25([component()],Nt);var __decorate26=function(t,e,i,n){var s,o=arguments.length,r=o<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,i,n);else for(var a=t.length-1;a>=0;a--)(s=t[a])&&(r=(o<3?s(r):o>3?s(e,i,r):s(e,i))||r);return o>3&&r&&Object.defineProperty(e,i,r),r},Ft=__name(class UIBossWeaponButtonHolder2 extends pc.ScriptType{constructor(){super(...arguments),this.currentFiringWeaponId=null}initialize(){this.weaponButtons=[];for(const t of this.weaponButtonEntities){const e=t.getScript(Nt);this.weaponButtons.push(e),e.on(Nt.EVENT_DOWN,this.onStartFire,this),e.on(Nt.EVENT_UP,this.onEndFire,this)}this.app.on(p.BossPhaseStarted,this.onBossPhaseStarted,this),this.app.on(p.BossPhaseReadyToPlay,this.onBossPhaseReady,this),this.app.on(p.GameStateChanged,this.onGameStateChanged,this),this.app.on(p.BossBeginAttack,this.onBossBeginAttack,this),this.entity.once(p.OnDestroy,(()=>{this.app.off(p.BossPhaseStarted,this.onBossPhaseStarted,this),this.app.off(p.BossPhaseReadyToPlay,this.onBossPhaseReady,this),this.app.off(p.GameStateChanged,this.onGameStateChanged,this),this.app.off(p.BossBeginAttack,this.onBossBeginAttack,this)}),this)}hideAllWeaponButtons(){for(const t of this.weaponButtons)t.entity.enabled=!1;this.currentFiringWeaponId&&this.onEndFire(this.currentFiringWeaponId)}onStartFire(t){if(!this.currentFiringWeaponId){this.currentFiringWeaponId=t;for(const e of this.activeButtons)e.setIsEnabled(e.getWeaponId()===t);this.app.fire(p.BossStartFiring,this.currentFiringWeaponId)}}onEndFire(t){if(this.currentFiringWeaponId===t){this.currentFiringWeaponId=null;for(const t of this.activeButtons)t.setIsEnabled(t.getCount()>0);this.app.fire(p.BossEndFiring,t)}}onBossPhaseStarted(t){this.activeButtons=[];for(const e of this.weaponButtons){const i=e.getWeaponId().toString();t.activeWeaponIds.includes(i)&&(this.activeButtons.push(e),e.setCount(t.collectedAmmo[i])),e.setIsEnabled(!1),e.entity.enabled=!1}}onBossPhaseReady(){for(const t of this.activeButtons)t.setIsEnabled(!0),t.entity.enabled=!0}onGameStateChanged(t){t===ot.CoreEnd&&this.hideAllWeaponButtons()}onBossBeginAttack(){this.hideAllWeaponButtons()}},"UIBossWeaponButtonHolder");__decorate26([attribute(268436480),function(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)}("design:type",Array)],Ft.prototype,"weaponButtonEntities",void 0),Ft=__decorate26([component()],Ft);var Vt,__decorate27=function(t,e,i,n){var s,o=arguments.length,r=o<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,i,n);else for(var a=t.length-1;a>=0;a--)(s=t[a])&&(r=(o<3?s(r):o>3?s(e,i,r):s(e,i))||r);return o>3&&r&&Object.defineProperty(e,i,r),r},Ut=__name(class UICountdown2 extends pc.ScriptType{initialize(){this.entity.enabled=!1}update(t){if(this.timer>0){this.timer-=t;const e=Math.max(0,Math.round(this.timer));this.textEntity.element.text=e.toString().replace("0","GO!"),this.timer<=0&&(this.entity.enabled=!1)}}startCountdown(t){this.timer=t,this.entity.enabled=!0}},"UICountdown");__decorate27([attribute(1024),function(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)}("design:type","function"==typeof(Vt="undefined"!=typeof pc&&pc.Entity)?Vt:Object)],Ut.prototype,"textEntity",void 0),Ut=__decorate27([component()],Ut);var Ht=class{static formatTime_MSS(t){const e=Math.floor(t/60);return`${e}:${Math.floor(t-60*e).toString().padStart(2,"0")}`}};__name(Ht,"StringUtils");var kt,Gt,Wt,Qt,Jt,__decorate28=function(t,e,i,n){var s,o=arguments.length,r=o<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,i,n);else for(var a=t.length-1;a>=0;a--)(s=t[a])&&(r=(o<3?s(r):o>3?s(e,i,r):s(e,i))||r);return o>3&&r&&Object.defineProperty(e,i,r),r},__metadata25=function(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)},qt=__name(class UIGameTimer2 extends pc.ScriptType{constructor(){super(...arguments),this.prevProgress=1}initialize(){this.radialBar=this.radialBarEntity.getScript(W),this.entity.setLocalScale(0,0,0),this.app.on(p.GameStateChanged,this.onGameStateChanged,this),this.interval=setInterval((()=>this.onInterval(at.instance.gameTimer,at.instance.roundTime)),100),this.entity.once(p.OnDestroy,(()=>{this.app.off(p.GameStateChanged,this.onGameStateChanged,this),clearInterval(this.interval)}),this)}onGameStateChanged(t){switch(t){case ot.CoreStarting:this.onCoreStarting();break;case ot.CoreBossStarting:this.onCoreBoss()}}onInterval(t,e){var i;const n=Math.max(0,Math.ceil(t)),s=Ht.formatTime_MSS(n);this.textEntity.element.text=s;const o=t/e;this.radialBar.setProgress(o),this.radialBar.radialFillEntity.element.color=o<.25?this.colorRed:o<.55?this.colorYellow:this.colorGreen,o<.25&&this.prevProgress>=.25&&at.instance.state===ot.CoreStarted&&(null===(i=this.tween)||void 0===i||i.stop(),this.tween=this.entity.tween(this.entity.getLocalScale()).to({x:1.1,y:1.1,z:1.1},.25,pc.SineInOut).loop(!0).yoyo(!0).start()),this.prevProgress=o}onCoreStarting(){var t;null===(t=this.tween)||void 0===t||t.stop(),this.tween=this.entity.tween(this.entity.getLocalScale()).to({x:1,y:1,z:1},.5,pc.BackOut).start()}onCoreBoss(){var t;null===(t=this.tween)||void 0===t||t.stop(),this.tween=this.entity.tween(this.entity.getLocalScale()).to({x:0,y:0,z:0},.5,pc.BackIn).start()}},"UIGameTimer");__decorate28([attribute(1024),__metadata25("design:type","function"==typeof(kt="undefined"!=typeof pc&&pc.Entity)?kt:Object)],qt.prototype,"textEntity",void 0),__decorate28([attribute(1024),__metadata25("design:type","function"==typeof(Gt="undefined"!=typeof pc&&pc.Entity)?Gt:Object)],qt.prototype,"radialBarEntity",void 0),__decorate28([attribute(32),__metadata25("design:type","function"==typeof(Wt="undefined"!=typeof pc&&pc.Color)?Wt:Object)],qt.prototype,"colorGreen",void 0),__decorate28([attribute(32),__metadata25("design:type","function"==typeof(Qt="undefined"!=typeof pc&&pc.Color)?Qt:Object)],qt.prototype,"colorYellow",void 0),__decorate28([attribute(32),__metadata25("design:type","function"==typeof(Jt="undefined"!=typeof pc&&pc.Color)?Jt:Object)],qt.prototype,"colorRed",void 0),qt=__decorate28([component()],qt);var $t,Yt,Kt,__decorate29=function(t,e,i,n){var s,o=arguments.length,r=o<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,i,n);else for(var a=t.length-1;a>=0;a--)(s=t[a])&&(r=(o<3?s(r):o>3?s(e,i,r):s(e,i))||r);return o>3&&r&&Object.defineProperty(e,i,r),r},__metadata26=function(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)},Zt=__name(class UIGame2 extends pc.ScriptType{initialize(){this.timer=this.timerEntity.getScript(qt),this.countdown=this.countdownEntity.getScript(Ut),this.app.on(p.CoreStarted,this.onCoreStarted,this),this.entity.once(p.OnDestroy,(()=>{this.app.off(p.CoreStarted,this.onCoreStarted,this)}),this)}onCoreStarted(t,e,i){this.countdown.startCountdown(i)}},"UIGame");__decorate29([attribute(1024),__metadata26("design:type","function"==typeof($t="undefined"!=typeof pc&&pc.Entity)?$t:Object)],Zt.prototype,"pointCounterEntity",void 0),__decorate29([attribute(1024),__metadata26("design:type","function"==typeof(Yt="undefined"!=typeof pc&&pc.Entity)?Yt:Object)],Zt.prototype,"timerEntity",void 0),__decorate29([attribute(1024),__metadata26("design:type","function"==typeof(Kt="undefined"!=typeof pc&&pc.Entity)?Kt:Object)],Zt.prototype,"countdownEntity",void 0),Zt=__decorate29([component()],Zt);var Xt=__name(class UIPauseMenu2 extends pc.ScriptType{},"UIPauseMenu");Xt=function(t,e,i,n){var s,o=arguments.length,r=o<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,i,n);else for(var a=t.length-1;a>=0;a--)(s=t[a])&&(r=(o<3?s(r):o>3?s(e,i,r):s(e,i))||r);return o>3&&r&&Object.defineProperty(e,i,r),r}([component()],Xt);var te=__name(class UIPauseScreen2 extends pc.ScriptType{initialize(){this.app.on(p.OnPause,this.onPause,this),this.app.on(p.OnResume,this.onResume,this),this.entity.once(p.OnDestroy,(()=>{this.app.off(p.OnPause,this.onPause,this),this.app.off(p.OnResume,this.onResume,this)}),this),this.entity.enabled=!1}onPause(){this.entity.enabled=!0}onResume(){this.entity.enabled=!1}},"UIPauseScreen");te=function(t,e,i,n){var s,o=arguments.length,r=o<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,i,n);else for(var a=t.length-1;a>=0;a--)(s=t[a])&&(r=(o<3?s(r):o>3?s(e,i,r):s(e,i))||r);return o>3&&r&&Object.defineProperty(e,i,r),r}([component()],te);var ee,__decorate32=function(t,e,i,n){var s,o=arguments.length,r=o<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,i,n);else for(var a=t.length-1;a>=0;a--)(s=t[a])&&(r=(o<3?s(r):o>3?s(e,i,r):s(e,i))||r);return o>3&&r&&Object.defineProperty(e,i,r),r},ie=__name(class UIPointCounter2 extends pc.ScriptType{initialize(){this.app.on(p.PointsGained,this.setPoints,this),this.entity.once(p.OnDestroy,(()=>{this.app.off(p.PointsGained,this.setPoints,this)}),this)}setPoints(t){this.textEntity.element.text=Math.floor(t).toString()}},"UIPointCounter");__decorate32([attribute(1024),function(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)}("design:type","function"==typeof(ee="undefined"!=typeof pc&&pc.Entity)?ee:Object)],ie.prototype,"textEntity",void 0),ie=__decorate32([component()],ie);var ne,__decorate33=function(t,e,i,n){var s,o=arguments.length,r=o<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,i,n);else for(var a=t.length-1;a>=0;a--)(s=t[a])&&(r=(o<3?s(r):o>3?s(e,i,r):s(e,i))||r);return o>3&&r&&Object.defineProperty(e,i,r),r},__metadata28=function(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)},se=__name(class UIConsumeCounter2 extends pc.ScriptType{constructor(){super(...arguments),this.instances=[]}initialize(){this.template.enabled=!1;for(let t=0;t<this.instanceCount;t++){const t=this.template.clone();this.entity.addChild(t),t.enabled=!1,this.instances.push(t)}this.template.destroy(),this.app.on(p.HoleAteSomething,this.onHoleAteSomething,this),this.entity.once(p.OnDestroy,(()=>{this.app.off(p.HoleAteSomething,this.onHoleAteSomething,this)}),this)}onHoleAteSomething(t){const e=this.entity.children[0];e.remove(),this.entity.addChild(e),e.enabled=!0,e.element.text=`+${t.toString()}`,e.setLocalPosition(0,0,0),e.tween(e.getLocalPosition()).to({y:120},.5,pc.ExponentialOut).onComplete((()=>e.enabled=!1)).start()}},"UIConsumeCounter");__decorate33([attribute(4,4),__metadata28("design:type",Number)],se.prototype,"instanceCount",void 0),__decorate33([attribute(1024),__metadata28("design:type","function"==typeof(ne="undefined"!=typeof pc&&pc.Entity)?ne:Object)],se.prototype,"template",void 0),se=__decorate33([component()],se);var oe=__name(class UISizeUp2 extends pc.ScriptType{initialize(){this.entity.enabled=!1,this.startOpacity=this.entity.element.opacity,this.startOutline=this.entity.element.outlineColor.a,this.startShadow=this.entity.element.shadowColor.a,this.startPosY=this.entity.getLocalPosition().y,this.app.on(p.HoleChangedSize,this.onHoleChangedSize,this),this.entity.once(p.OnDestroy,(()=>{this.app.off(p.HoleChangedSize,this.onHoleChangedSize,this)}),this)}onHoleChangedSize(t,e){if(t<e)return;this.entity.enabled=!0,this.entity.setLocalScale(0,0,0),this.entity.element.opacity=this.startOpacity;const i=this.entity.element.shadowColor.clone();i.a=this.startShadow,this.entity.element.shadowColor=i;const n=this.entity.element.outlineColor.clone();n.a=this.startShadow,this.entity.element.outlineColor=n,this.entity.getLocalPosition().y=this.startPosY;const s=this.entity.tween(this.entity.getLocalScale()).to({x:1,y:1,z:1},.5,pc.ElasticOut),o={t:0},r=this.entity.tween(o).to({t:1},1,pc.Linear).onUpdate((()=>{const t=pc.CircularInOut(o.t);this.entity.element.opacity=pc.math.lerp(this.startOpacity,0,t);const e=this.entity.element.shadowColor.clone();e.a=pc.math.lerp(this.startShadow,0,t),this.entity.element.shadowColor=e;const i=this.entity.element.outlineColor.clone();i.a=pc.math.lerp(this.startOutline,0,t),this.entity.element.outlineColor=i,this.entity.setLocalPosition(0,pc.math.lerp(this.startPosY,this.startPosY+50,pc.QuadraticIn(o.t)),0)}));s.chain(r).start()}},"UISizeUp");oe=function(t,e,i,n){var s,o=arguments.length,r=o<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,i,n);else for(var a=t.length-1;a>=0;a--)(s=t[a])&&(r=(o<3?s(r):o>3?s(e,i,r):s(e,i))||r);return o>3&&r&&Object.defineProperty(e,i,r),r}([component()],oe);var re,ae,ce,__decorate35=function(t,e,i,n){var s,o=arguments.length,r=o<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,i,n);else for(var a=t.length-1;a>=0;a--)(s=t[a])&&(r=(o<3?s(r):o>3?s(e,i,r):s(e,i))||r);return o>3&&r&&Object.defineProperty(e,i,r),r},__metadata29=function(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)},le=__name(class CameraPosition2 extends pc.ScriptType{postInitialize(){return function(t,e,i,n){function adopt(t){return t instanceof i?t:new i((function(e){e(t)}))}return __name(adopt,"adopt"),new(i||(i=Promise))((function(i,s){function fulfilled(t){try{step(n.next(t))}catch(t){s(t)}}function rejected(t){try{step(n.throw(t))}catch(t){s(t)}}function step(t){t.done?i(t.value):adopt(t.value).then(fulfilled,rejected)}__name(fulfilled,"fulfilled"),__name(rejected,"rejected"),__name(step,"step"),step((n=n.apply(t,e||[])).next())}))}(this,void 0,void 0,(function*(){this.hole=this.holeEntity.getScript(q),this.updateSize(this.hole.getSize()),this.app.on(p.HoleChangedSize,(t=>this.updateSize(t)))}))}updateSize(t,e=.33,i=pc.BackOut){let n=this.basePosition.clone().add(this.scaling.clone().mulScalar(t));return this.entity.tween(this.entity.getLocalPosition()).to(n,e,i).start()}},"CameraPosition");__decorate35([attribute(1024),__metadata29("design:type","function"==typeof(re="undefined"!=typeof pc&&pc.Entity)?re:Object)],le.prototype,"holeEntity",void 0),__decorate35([attribute(262144),__metadata29("design:type","function"==typeof(ae="undefined"!=typeof pc&&pc.Vec3)?ae:Object)],le.prototype,"basePosition",void 0),__decorate35([attribute(262144),__metadata29("design:type","function"==typeof(ce="undefined"!=typeof pc&&pc.Vec3)?ce:Object)],le.prototype,"scaling",void 0),le=__decorate35([component()],le);var pe,__decorate36=function(t,e,i,n){var s,o=arguments.length,r=o<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,i,n);else for(var a=t.length-1;a>=0;a--)(s=t[a])&&(r=(o<3?s(r):o>3?s(e,i,r):s(e,i))||r);return o>3&&r&&Object.defineProperty(e,i,r),r},he=__name(class CameraRig2 extends pc.ScriptType{postInitialize(){this.hole=this.holeEntity.getScript(q),this.camera=this.entity.findComponent("camera"),this.startPosition=this.camera.entity.getLocalPosition().clone(),this.updateSize(this.hole.getSize()),this.app.on(p.HoleChangedSize,(t=>this.updateSize(t)),this)}updateSize(t,e=.5,i=pc.BackOut){let n=this.startPosition.clone().mulScalar(Math.pow(t,.9));this.camera.entity.tween(this.camera.entity.getLocalPosition()).to(n,e,i).start()}},"CameraRig");__decorate36([attribute(1024),function(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)}("design:type","function"==typeof(pe="undefined"!=typeof pc&&pc.Entity)?pe:Object)],he.prototype,"holeEntity",void 0),he=__decorate36([component()],he);var ue,__decorate37=function(t,e,i,n){var s,o=arguments.length,r=o<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,i,n);else for(var a=t.length-1;a>=0;a--)(s=t[a])&&(r=(o<3?s(r):o>3?s(e,i,r):s(e,i))||r);return o>3&&r&&Object.defineProperty(e,i,r),r},de=__name(class Consumer2 extends pc.ScriptType{constructor(){super(...arguments),this.instantConsumptionTreshold=10}initialize(){this.hole=this.holeEntity.getScript(q),this.previousConsumables=[],this.wantToConsume=[],this.canceledConsumables=[],this.newlyConsumed=[],this.allConsumed=[],this.twoDPos=new pc.Vec2,this.twoDTarget=new pc.Vec2,this.bounds=new pc.BoundingBox(this.entity.getPosition().clone().add(pc.Vec3.DOWN.clone().mulScalar(2*this.hole.getSize()))),this.app.on(p.HoleChangedSize,(t=>this.setBounds(1.05*t)),this),this.setBounds(1.05*this.hole.getSize())}update(){let t=this.entity.getPosition();this.twoDPos.x=t.x,this.twoDPos.y=t.z,this.bounds.center=this.entity.getPosition().clone().add(pc.Vec3.DOWN.clone().mulScalar(2*this.hole.getSize())),this.handleConsumables()}setBounds(t){this.bounds.halfExtents=new pc.Vec3(2*t,2*t,2*t)}handleConsumables(){let t=this.selectConsumables();this.beginConsumptionIfPossible(t),this.handlePreviousConsumables(t)}selectConsumables(){let t=[],e=b.instance.getConsumables();for(let i=1;i<=this.hole.getLevel();i++)this.selectConsumsablesFromLevel(e,i,t);return t}selectConsumsablesFromLevel(t,e,i){let n=t[e];if(void 0!==n&&0!==n.length)for(const t of n){if(t.consumer&&t.consumer!==this.hole)continue;if(e<t.levelRequired)continue;let n=t.getPropPosition();this.twoDTarget.x=n.x,this.twoDTarget.y=n.z,this.twoDTarget.distance(this.twoDPos)>this.hole.getSize()/2-.6*t.radius||(i.push(t),t.consumer||(t.markForConsumption(this.hole),this.wantToConsume.includes(t)||this.addToWantToConsume(t)))}}addToWantToConsume(t){if(this.canceledConsumables.includes(t)){if(this.canceledConsumables.length>1){let e=this.canceledConsumables.indexOf(t);this.canceledConsumables[e]=this.canceledConsumables[this.canceledConsumables.length-1]}this.canceledConsumables.pop()}else this.wantToConsume.push(t)}beginConsumptionIfPossible(t){for(const e of t)e.consumer===this.hole&&this.beginConsumption(e)}beginConsumption(t){this.newlyConsumed.push(t),this.allConsumed.push(t),t.beginConsumption(this.hole)}handlePreviousConsumables(t){if(this.previousConsumables)for(const e of this.previousConsumables)t.includes(e)||e.consumed||this.cancelConsumption(e);this.previousConsumables=t}cancelConsumption(t){if(t.cancelConsumption(this.hole),this.wantToConsume.includes(t)){if(this.wantToConsume.length>1){let e=this.wantToConsume.indexOf(t);this.wantToConsume[e]=this.wantToConsume[this.wantToConsume.length-1]}this.wantToConsume.pop()}else this.canceledConsumables.push(t)}},"Consumer");__decorate37([attribute(1024),function(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)}("design:type","function"==typeof(ue="undefined"!=typeof pc&&pc.Entity)?ue:Object)],de.prototype,"holeEntity",void 0),de=__decorate37([component()],de);var fe,__decorate38=function(t,e,i,n){var s,o=arguments.length,r=o<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,i,n);else for(var a=t.length-1;a>=0;a--)(s=t[a])&&(r=(o<3?s(r):o>3?s(e,i,r):s(e,i))||r);return o>3&&r&&Object.defineProperty(e,i,r),r},ye=__name(class Follow2 extends pc.ScriptType{postUpdate(){this.entity.setPosition(this.targetEntity.getPosition())}},"Follow");__decorate38([attribute(1024),function(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)}("design:type","function"==typeof(fe="undefined"!=typeof pc&&pc.Entity)?fe:Object)],ye.prototype,"targetEntity",void 0),ye=__decorate38([component()],ye);var me,__decorate39=function(t,e,i,n){var s,o=arguments.length,r=o<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,i,n);else for(var a=t.length-1;a>=0;a--)(s=t[a])&&(r=(o<3?s(r):o>3?s(e,i,r):s(e,i))||r);return o>3&&r&&Object.defineProperty(e,i,r),r},__metadata33=function(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)},ge=__name(class PipeCollider2 extends pc.ScriptType{initialize(){this.hole=this.holeEntity.getScript(q),this.updateSize(this.hole.getSize()),this.app.on(p.HoleChangedSize,(t=>this.updateSize(t)))}updateSize(t){let e=new pc.Vec3(t,1,t);this.entity.setLocalScale(e.clone());let i=e.mulScalar(.5);i.y=1,this.edges.forEach((t=>t.collision.halfExtents=i))}},"PipeCollider");__decorate39([attribute(1024,void 0,void 0,"Hole"),__metadata33("design:type","function"==typeof(me="undefined"!=typeof pc&&pc.Entity)?me:Object)],ge.prototype,"holeEntity",void 0),__decorate39([attribute(268436480),__metadata33("design:type",Array)],ge.prototype,"edges",void 0),ge=__decorate39([component()],ge);var __decorate40=function(t,e,i,n){var s,o=arguments.length,r=o<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,i,n);else for(var a=t.length-1;a>=0;a--)(s=t[a])&&(r=(o<3?s(r):o>3?s(e,i,r):s(e,i))||r);return o>3&&r&&Object.defineProperty(e,i,r),r},__metadata34=function(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)},be=__name(class PlayerController2 extends Q{constructor(){super(...arguments),this.speedMultiplier=1,this.maxConsumedItems=0,this.paused=!1}initialize(){const t=Object.create(null,{initialize:{get:()=>super.initialize}});return function(t,e,i,n){function adopt(t){return t instanceof i?t:new i((function(e){e(t)}))}return __name(adopt,"adopt"),new(i||(i=Promise))((function(i,s){function fulfilled(t){try{step(n.next(t))}catch(t){s(t)}}function rejected(t){try{step(n.throw(t))}catch(t){s(t)}}function step(t){t.done?i(t.value):adopt(t.value).then(fulfilled,rejected)}__name(fulfilled,"fulfilled"),__name(rejected,"rejected"),__name(step,"step"),step((n=n.apply(t,e||[])).next())}))}(this,void 0,void 0,(function*(){t.initialize.call(this),wt.instance.app.on(v.PointerDown,(t=>this.onInputDown(t))),wt.instance.app.on(v.PointerPressed,(t=>this.onInput(t))),wt.instance.app.on(v.PointerUp,(()=>this.onInputUp())),this.app.on(p.OnPause,this.onPause,this),this.app.on(p.OnResume,this.onResume,this),this.entity.on(p.OnDestroy,this.onDestroy)}))}getMaxConsumedItems(){return this.maxConsumedItems}update(t){this.paused||(super.fixedUpdate(t),isNaN(this.targetPos.x)||isNaN(this.targetPos.z)||this.targetPos&&this.entity.setPosition(this.targetPos))}onDestroy(){wt.instance.app.off(v.PointerDown,(t=>this.onInputDown(t))),wt.instance.app.off(v.PointerPressed,(t=>this.onInput(t))),wt.instance.app.off(v.PointerUp,(()=>this.onInputUp())),this.app.off(p.OnPause,this.onPause,this),this.app.off(p.OnResume,this.onResume,this)}largestScreenSide(){return Math.max(this.app.graphicsDevice.width,this.app.graphicsDevice.height)}getDragTreshold(){return this.largestScreenSide()*this.dragTreshold}getMinimumDragTreshold(){return this.largestScreenSide()*this.minimumDragTreshold}onInput(t){this.firstPos||(this.firstPos=t.clone());let e=new pc.Vec3(t.x-this.firstPos.x,0,t.y-this.firstPos.y),i=this.getDragTreshold();e.length()<this.getMinimumDragTreshold()&&(this.dir=pc.Vec3.ZERO.clone()),e.length()>i&&(e=e.normalize(),e=e.mulScalar(i)),this.dir=e.mulScalar(1/i)}onInputDown(t){this.firstPos=t.clone()}onInputUp(){this.dir=pc.Vec3.ZERO.clone()}onPause(){this.paused=!0}onResume(){this.paused=!1}},"PlayerController");__decorate40([attribute(4,.001,"Minimum Drag Treshold (% of screen)"),__metadata34("design:type",Number)],be.prototype,"minimumDragTreshold",void 0),__decorate40([attribute(4,.01,"Drag Treshold (% of screen)"),__metadata34("design:type",Number)],be.prototype,"dragTreshold",void 0),be=__decorate40([component()],be);var ve,Se,__decorate41=function(t,e,i,n){var s,o=arguments.length,r=o<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,i,n);else for(var a=t.length-1;a>=0;a--)(s=t[a])&&(r=(o<3?s(r):o>3?s(e,i,r):s(e,i))||r);return o>3&&r&&Object.defineProperty(e,i,r),r},__metadata35=function(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)},Pe=__name(class ScaleWithHoleSize2 extends pc.ScriptType{constructor(){super(...arguments),this.previousSize=0}initialize(){this.holeEntity&&this.init(this.holeEntity)}init(t){this.hole=t.getScript(q),this.updateSize(this.hole.getSize()),this.app.on(p.HoleChangedSize,(t=>this.updateSize(t)))}updateSize(t){let e=this.baseScale.clone().mulScalar(t*this.scaling);this.scaleX||(e.x=this.baseScale.x),this.scaleY||(e.y=this.baseScale.y),this.scaleZ||(e.z=this.baseScale.z),t>this.previousSize?this.entity.tween(this.entity.getLocalScale()).to(e,.25,pc.BackOut).start():this.entity.setLocalScale(e),this.previousSize=t}},"ScaleWithHoleSize");__decorate41([attribute(1024),__metadata35("design:type","function"==typeof(ve="undefined"!=typeof pc&&pc.Entity)?ve:Object)],Pe.prototype,"holeEntity",void 0),__decorate41([attribute(262144),__metadata35("design:type","function"==typeof(Se="undefined"!=typeof pc&&pc.Vec3)?Se:Object)],Pe.prototype,"baseScale",void 0),__decorate41([attribute(4),__metadata35("design:type",Number)],Pe.prototype,"scaling",void 0),__decorate41([attribute(2),__metadata35("design:type",Boolean)],Pe.prototype,"scaleX",void 0),__decorate41([attribute(2),__metadata35("design:type",Boolean)],Pe.prototype,"scaleY",void 0),__decorate41([attribute(2),__metadata35("design:type",Boolean)],Pe.prototype,"scaleZ",void 0),Pe=__decorate41([component()],Pe);var we,Ce=we=__name(class HardwareInstanceManager2 extends pc.ScriptType{constructor(){super(...arguments),this.scale=new pc.Vec3(.01,.01,.01),this.instances=[]}initialize(){we.instance=this}registerInstance(t){let e=this.instances.find((e=>e.assetId===t.entity.model.asset));if(!e){const i=new pc.Entity;pc.app.root.addChild(i);const n=new pc.GraphNode;i.addChild(n);const s=new pc.MeshInstance(t.entity.model.meshInstances[0].mesh,t.entity.model.meshInstances[0].material,n),o=new pc.Model;o.meshInstances=[s],o.graph=n;const r=i.addComponent("model");r.layers=[...t.entity.model.layers],r.model=o,e={assetId:t.entity.model.asset,items:[],entity:i,matrix:new pc.Mat4,matrices:null,vertexBuffer:null},this.instances.push(e)}t.entity.model.enabled=!1,e.items.push(t),e.matrices=new Float32Array(16*e.items.length),e.vertexBuffer=new pc.VertexBuffer(this.app.graphicsDevice,pc.VertexFormat.getDefaultInstancingFormat(this.app.graphicsDevice),e.items.length,pc.BUFFER_DYNAMIC,e.matrices),e.entity.model.meshInstances[0].setInstancing(e.vertexBuffer),this.updateMatrices()}unregisterInstance(t){let e=this.instances.find((e=>e.assetId===t.entity.model.asset));if(!e)return void console.error("Instance collection not found:",t.entity.model.asset);const i=e.items.indexOf(t);i<0?console.error("Instance item not found:",t.entity.model.asset):(e.items.splice(i,1),e.matrices=new Float32Array(16*e.items.length),t.entity.model.enabled=!0)}updateMatrices(){for(let t=0;t<this.instances.length;t++){const e=this.instances[t];let i=0;for(let t=0;t<e.items.length;t++){const n=e.items[t];e.matrix.setTRS(n.entity.getPosition(),n.entity.getRotation(),this.scale);for(let t=0;t<16;t++)e.matrices[i++]=e.matrix.data[t]}e.vertexBuffer.setData(e.matrices)}}},"HardwareInstanceManager");Ce=we=function(t,e,i,n){var s,o=arguments.length,r=o<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,i,n);else for(var a=t.length-1;a>=0;a--)(s=t[a])&&(r=(o<3?s(r):o>3?s(e,i,r):s(e,i))||r);return o>3&&r&&Object.defineProperty(e,i,r),r}([component()],Ce);var Ee=__name(class HardwareInstanceItem2 extends pc.ScriptType{postInitialize(){this.entity.on("destroy",this.onDestroy,this),Ce.instance.registerInstance(this)}onDestroy(){this.entity.off("destroy",this.onDestroy,this),Ce.instance.unregisterInstance(this)}},"HardwareInstanceItem");Ee=function(t,e,i,n){var s,o=arguments.length,r=o<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,i,n);else for(var a=t.length-1;a>=0;a--)(s=t[a])&&(r=(o<3?s(r):o>3?s(e,i,r):s(e,i))||r);return o>3&&r&&Object.defineProperty(e,i,r),r}([component()],Ee);var Re,__decorate44=function(t,e,i,n){var s,o=arguments.length,r=o<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,i,n);else for(var a=t.length-1;a>=0;a--)(s=t[a])&&(r=(o<3?s(r):o>3?s(e,i,r):s(e,i))||r);return o>3&&r&&Object.defineProperty(e,i,r),r},Oe=Re=__name(class MaskedByStencil2 extends pc.ScriptType{initialize(){this.app.on(p.OnIOSResume,this.setup,this),this.setup()}setup(){const t=this.entity.model.meshInstances,e=new pc.StencilParameters({func:pc.FUNC_EQUAL,ref:this.refId});if(t)for(let i=0;i<t.length;i++){t[i].layer--;let n=Re.materialDictionary.find((e=>e.original===t[i].material));if(n)t[i].material=n.mat;else{const n=t[i].material.clone();n.stencilBack=n.stencilFront=e,Re.materialDictionary.push({original:t[i].material,mat:n}),t[i].material=n}}}},"MaskedByStencil");Oe.materialDictionary=[],__decorate44([attribute(4),function(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)}("design:type",Number)],Oe.prototype,"refId",void 0),Oe=Re=__decorate44([component()],Oe);var __decorate45=function(t,e,i,n){var s,o=arguments.length,r=o<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,i,n);else for(var a=t.length-1;a>=0;a--)(s=t[a])&&(r=(o<3?s(r):o>3?s(e,i,r):s(e,i))||r);return o>3&&r&&Object.defineProperty(e,i,r),r},Te=__name(class StencilMask2 extends pc.ScriptType{initialize(){this.app.on(p.OnIOSResume,this.setup,this),this.setup()}setup(){const t=this.entity.model.meshInstances[0].material.clone();t.redWrite=t.greenWrite=t.blueWrite=t.alphaWrite=!1,t.stencilFront=t.stencilBack=new pc.StencilParameters({ref:this.maskId,zpass:pc.STENCILOP_REPLACE}),this.entity.model.meshInstances[0].material=t}},"StencilMask");__decorate45([attribute(4),function(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)}("design:type",Number)],Te.prototype,"maskId",void 0),Te=__decorate45([component()],Te);var je=__name(class PoolableEntity2 extends pc.ScriptType{init(t){this.pool=t,this.initialized=!0}despawn(){this.pool.release(this)}reset(){}},"PoolableEntity");je=function(t,e,i,n){var s,o=arguments.length,r=o<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,i,n);else for(var a=t.length-1;a>=0;a--)(s=t[a])&&(r=(o<3?s(r):o>3?s(e,i,r):s(e,i))||r);return o>3&&r&&Object.defineProperty(e,i,r),r}([component()],je);var Ie,__decorate47=function(t,e,i,n){var s,o=arguments.length,r=o<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,i,n);else for(var a=t.length-1;a>=0;a--)(s=t[a])&&(r=(o<3?s(r):o>3?s(e,i,r):s(e,i))||r);return o>3&&r&&Object.defineProperty(e,i,r),r},__metadata38=function(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)},__awaiter15=function(t,e,i,n){function adopt(t){return t instanceof i?t:new i((function(e){e(t)}))}return __name(adopt,"adopt"),new(i||(i=Promise))((function(i,s){function fulfilled(t){try{step(n.next(t))}catch(t){s(t)}}function rejected(t){try{step(n.throw(t))}catch(t){s(t)}}function step(t){t.done?i(t.value):adopt(t.value).then(fulfilled,rejected)}__name(fulfilled,"fulfilled"),__name(rejected,"rejected"),__name(step,"step"),step((n=n.apply(t,e||[])).next())}))},Be=__name(class EntityPool2 extends pc.ScriptType{initialize(){return __awaiter15(this,void 0,void 0,(function*(){this.pool=[],this.activeEntities=[],this.initialPoolSize>0&&(yield this.fillPool(this.asyncInitialization))}))}fillPool(t){return __awaiter15(this,void 0,void 0,(function*(){if(!this.fillingPool){for(this.fillingPool=!0;this.pool.length+this.activeEntities.length<this.initialPoolSize;){t&&(yield y.forMilis(10));const e=this.makeNewEntity();this.pool.push(e)}this.fillingPool=!1}}))}create(){let t;return this.pool.length>0?t=this.pool.pop():this.reuseEntities?t=this.activeEntities.shift():this.doubleWhenEmpty?(this.fillPool(!1),t=this.pool.pop()):t=this.makeNewEntity(),t.entity.enabled=!0,this.reuseEntities&&this.activeEntities.push(t),t}release(t){t.reset(),t.entity.enabled=this.enabledInPool,t.entity.reparent(this.entity),t.entity.setLocalPosition(0,0,0),this.pool.push(t)}makeNewEntity(){const t=this.prefab.resource.instantiate();this.entity.addChild(t),t.enabled=this.enabledInPool;const e=t.getScript(je);return e.init(this),e}},"EntityPool");__decorate47([attribute(4,1),__metadata38("design:type",Number)],Be.prototype,"initialPoolSize",void 0),__decorate47([attribute(32768),__metadata38("design:type","function"==typeof(Ie="undefined"!=typeof pc&&pc.Asset)?Ie:Object)],Be.prototype,"prefab",void 0),__decorate47([attribute(2),__metadata38("design:type",Boolean)],Be.prototype,"asyncInitialization",void 0),__decorate47([attribute(2),__metadata38("design:type",Boolean)],Be.prototype,"enabledInPool",void 0),__decorate47([attribute(2),__metadata38("design:type",Boolean)],Be.prototype,"reuseEntities",void 0),__decorate47([attribute(2),__metadata38("design:type",Boolean)],Be.prototype,"doubleWhenEmpty",void 0),Be=__decorate47([component()],Be)})();